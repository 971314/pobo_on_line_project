function getConf(e,t){isPoboApp?t(JSON.parse(pbE.SYS().readConfig("message/conf/message.json"))):$.get(e+"conf/message.json?"+Date.now(),t)}function loading(e){e?pbSYS.showCircleView("Pbkey_Default_Circle",'{"Pbkey_Circle_MSG":"正在加载"}'):pbSYS.hideCircleView("Pbkey_Default_Circle")}function getMsgTypes(e){var t=JSON.parse(pbMSG.ytzLoadHDMsgTypes(1)).Messages;if(e)for(var i=JSON.parse(pbMSG.ytzLoadHDMsgTypes(2)).Messages,n=0;n<i.length;n++)i[n].other=!0,t.push(i[n]);return t}function isReady(e){pbMSG.ytzIsServiceReady()>=0?e():setTimeout(function(){isReady(e)},1e3)}var isPoboApp="undefined"!=typeof pbE;if(!isPoboApp)var pbE={MSG:function(){return{ytzLoadHDMsgTypes:function(e){var t;return t=1==e?[{typeid:"1",types:"通知公告",isoff:"1"},{typeid:"3",types:"产品消息",isoff:"1"},{typeid:"2",types:"预警消息",isoff:"1"}]:[{typeid:"5",types:"每日资讯",isoff:"1"},{typeid:"6",types:"重要警示",isoff:"1"},{typeid:"7",types:"成交回报",isoff:"1"}],JSON.stringify({Messages:t})},ytzLoadProFileMsg:function(e,t){var i=[],n=Date.now();t-=0;for(var o=0;o<e;o++)i.push({msgid:++t,typeid:o%7+"",title:"消息标题"+t,cont:"消息内容"+t+" "+n,readed:o%2+"",time:"20161221195218",par:"908110508,沪银1412,触发预警,34680,+170,价格达到设定上限34680"});return JSON.stringify({Messages:i})},ytzLoadProfileTypeMsg:function(e,t,i){var n=[];i-=0;for(var o=0;o<t;o++)n.push({msgid:++i,typeid:e+"",title:"消息标题"+i,cont:"消息内容"+i,readed:o%2+"",time:"20161213195218",par:"908110508,沪银1412,触发预警,34680,+170,价格达到设定上限34680"});return JSON.stringify({Messages:n})},ytzLoadProfileTypesMsg:function(e){return e=JSON.parse(e),this.ytzLoadProfileTypeMsg(1,e.maxmsgcount-0,e.latestid)},ytzGetUnReadMsgCount:function(){return 10},ytzGetUnReadMsgCountByType:function(e){return e},ytzUpdateReaded:function(){},ytzGetProFileMsg:function(){return JSON.stringify({msgid:1,typeid:"1",title:"消息标题",cont:"消息内容",par:"       消息内容\n消息内容消息内容\n消息内容",readed:0,time:"20161213195218"})},ytzCloudRequestInquire:function(){callback(JSON.stringify({moduleId:90007,functionNO:113,errorCode:0,jData:{1:"0",content:[{4:"1",5:"0"},{4:"2",5:"0"},{4:"3",5:"0"},{4:"4",5:"0"},{4:"5",5:"1"},{4:"6",5:"0"},{4:"7",5:"0"},{4:"8",5:"0"}]}}))},ytzCloudRequestOffLineMsg:function(e,t){callback(JSON.stringify({moduleId:90007,functionNO:110,errorCode:0,jData:{0:"110",1:"0",2:e+"",3:t?"1":"2"}}))},ytzHandleMsgHistoryQuery:function(e){console.log("sync:"+e);var t=++this.requestNo;return setTimeout(function(){callback(JSON.stringify({functionNO:111,moduleId:90007,requestNO:t}))},1e3),t},ytzIsServiceReady:function(){return console.log("ready: "+ ++this.count),this.count},count:-3,requestNo:0}},SYS:function(){return{showCircleView:function(){console.log("loading")},hideCircleView:function(){console.log("finished loading")},startLoading:function(){console.log("start loading")},stopLoading:function(){console.log("stop loading")}}}};var pbMSG=pbE.MSG(),pbSYS=pbE.SYS(),TEMPLATES={LIST:{DEFAULT:{template:"<div>{{item.cont}}</div>"},UNKNOWN:{template:"<div>unknown type:{{item.typeid}}</div>"},pwarning:{created:function(){this.item.par=this.item.par.split(",")},beforeUpdate:function(){"string"==typeof this.item.par&&(this.item.par=this.item.par.split(","))},template:"<div>{{item.par[1]+item.par[5]}}</div>"}},DETAIL:{DEFAULT:{template:"<div class='pre'>{{item.par||item.cont}}</div>"}}};