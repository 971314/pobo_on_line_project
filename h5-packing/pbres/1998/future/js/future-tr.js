function getCurrency(a){switch(a-=0){case 0:return"人民币";case 1:return"美元";case 2:return"港币";case 3:return"欧元";case 4:return"澳元";case 5:return"日元";case 6:return"台湾币";default:return"未知"}}function getUnit(a){switch(a-=0){case 0:return"元";case 1:return"美元";case 2:return"港币";case 3:return"欧元";case 4:return"澳元";case 5:return"日元";case 6:return"台币";default:return"未知"}}function JTrim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function setLiCurrency(a){for(var e="",n=0,r=a.length;n<r;n++)if(parseInt(a[n]+1)){var d=getCurrency(a[n]),t=getUnit(a[n]);0==n?(e+='<li data-currency="'+d+'" currency-unit="'+t+'" currencyCode="'+a[n]+'" class="hover">'+d+"</li>",oCurrency.innerHTML=d,$("#currency-unit").val(t),currencyCode=a[n]):e+='<li data-currency="'+d+'" currency-unit="'+t+'" currencyCode="'+a[n]+'">'+d+"</li>"}return e}function confirmIn(){$(".my-modal").addClass("hide"),$("#error").addClass("hide");var a=(new RegExp("^[0-9]*$"),document.getElementById("inAmount")),e=document.getElementById("inBankPwd").value,n=document.getElementById("inFundPwd").value;if(""==JTrim(a.value))return $("#error").removeClass("hide"),void $("#error").html("请输入转账金额！");if(!/^[0-9]+(.[0-9]{1,8})?$/.test(a.value))return $("#error").removeClass("hide"),void $("#error").html("转账金额要为数字！");if($("#moneyPwd").hasClass("hide")||$("#bankPwd").hasClass("hide"))if($("#moneyPwd").hasClass("hide")&&!$("#bankPwd").hasClass("hide")){if(""==JTrim(e))return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码！");$("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val()),bankPwd=pbE.WT().wtEncrypt(CID,$("#inBankPwd").val())}else if(!$("#moneyPwd").hasClass("hide")&&$("#bankPwd").hasClass("hide")){if(""==JTrim(n))return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码！");$("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val()),fundPwd=pbE.WT().wtEncrypt(CID,$("#inFundPwd").val())}else $("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val());else{if(""==JTrim(e))return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码！");if(""==JTrim(n))return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码！");$("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val()),fundPwd=pbE.WT().wtEncrypt(CID,$("#inFundPwd").val()),bankPwd=pbE.WT().wtEncrypt(CID,$("#inBankPwd").val())}}function completeIn(){$(".my-modal").addClass("hide"),$("#error").addClass("hide");var a={214:bankAccount,215:bankCode,51:fundAccount,56:currencyCode,59:fundPwd,60:bankPwd,220:$("#inAmount").val(),353:bankCenter};pbE.WT().wtGeneralRequest(CID,6202,JSON.stringify(a))}function completeOut(){$(".my-modal").addClass("hide"),$("#error").addClass("hide");var a={214:bankAccount,215:bankCode,51:fundAccount,56:currencyCode,59:fundPwd,60:bankPwd,220:$("#inAmount").val(),353:bankCenter};pbE.WT().wtGeneralRequest(CID,6201,JSON.stringify(a))}function queryBalance(){var a="",e="";if(!$("#moneyPwd").hasClass("hide")&&$("#bankPwd").hasClass("hide")){if(!$("#money-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码");a=pbE.WT().wtEncrypt(CID,$("#money-pwd").val())}else if($("#moneyPwd").hasClass("hide")||$("#bankPwd").hasClass("hide")){if($("#moneyPwd").hasClass("hide")&&!$("#bankPwd").hasClass("hide")){if(!$("#bank-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码");e=pbE.WT().wtEncrypt(CID,$("#bank-pwd").val())}}else{if(!$("#bank-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码");if($("#bank-pwd").val()&&!$("#money-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码");a=pbE.WT().wtEncrypt(CID,$("#money-pwd").val()),e=pbE.WT().wtEncrypt(CID,$("#bank-pwd").val())}var n={214:bankAccount,215:bankCode,51:fundAccount,56:currencyCode,59:a,60:e,353:bankCenter};pbE.WT().wtGeneralRequest(CID,6203,JSON.stringify(n))}function cancelIn(){$(".my-modal").addClass("hide")}function bankBalanceView(){window.setLiBank=function(a){for(var e="",n=0,r=a.length;n<r;n++)if(0==n){var d=a[n][214].slice(-4);e+='<li value="'+a[n][214]+'" data-code="'+a[n][215]+'" data-currency="'+a[n][56]+'" data-account="'+a[n][51]+'" balnceFlag="'+a[n][217]+'" class="hover">'+a[n][216]+'<span class="d8">(尾号'+d+")</span></span></li>",bankAccount=a[n][214],bankCode=a[n][215],currencyCode=a[n][56],fundAccount=a[n][51],bankCenter=a[n][353],4==a[n][217]?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==a[n][217]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==a[n][217]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==a[n][217]?($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")):3==a[n][217]?(flag=1,$("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")):($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),$("#bank").html('<span class="b1">'+a[n][216]+'<span class="d8">(尾号'+d+")</span></span>"),$("#fund-account").val(a[n][51]),$("#bank-currency").val(a[n][56]),$("#bank-val").val(a[n][214]),$("#bank-code").val(a[n][215]),$("#bank").val(a[n][216])}else{var d=a[n][214].slice(-4);e+='<li value="'+a[n][214]+'" data-code="'+a[n][215]+'" data-center="'+a[n][353]+'" data-currency="'+a[n][56]+'" data-account="'+a[n][51]+'" balnceFlag="'+a[n][217]+'">'+a[n][216]+'<span class="d8">(尾号'+d+")</span></span></li>"}return e},window.ready=function(){$("body").click(function(){$("#bank-ul").addClass("hide")}),$(".bank-div").click(function(a){$("#bank-ul").toggleClass("hide"),$("#bank").focus(),a.stopPropagation()}),$("#bank-ul").on("click","li",function(){bankAccount=$(this).attr("value"),bankCode=$(this).attr("data-code"),currencyCode=$(this).attr("data-currency"),fundAccount=$(this).attr("data-account"),flag=0,$("#bank").html($(this).html()),$("#bank-val").val($(this).attr("value")),$("#bank-code").val($(this).attr("data-code")),$("#bank-currency").val($(this).attr("data-currency")),$("#fund-account").val($(this).attr("data-account")),$("#bank-ul .hover").removeClass("hover"),$(this).addClass("hover"),4==$(this).attr("balnceFlag")?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==$(this).attr("balnceFlag")?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==$(this).attr("balnceFlag")?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==$(this).attr("balnceFlag")?($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")):3==$(this).attr("balnceFlag")?($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide"),flag=1):0!=$(this).attr("balnceFlag")&&$(this).attr("balnceFlag")||($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide"))})},pbE.WT().wtGeneralRequest(CID,6200,JSON.stringify({}))}function fundInOutView(){window.ready=function(){$("body").click(function(){$("#bank-ul").addClass("hide"),$("#currency-ul").addClass("hide")}),$(".bank-div").click(function(a){$("#currency-ul").addClass("hide"),$("#bank-ul").toggleClass("hide"),$("#bank").focus(),a.stopPropagation()}),$("#bank-ul").on("click","li",function(){bankCode=$(this).attr("data-code"),bankAccount=$(this).attr("bank-account"),fundAccount=$(this).attr("data-account"),bankCenter=$(this).attr("center-code"),$("#bank").val($(this).html()),$("#bank-name").val($(this).attr("data-name")),$("#bank-val").val($(this).attr("value")),$("#bank-code").val($(this).attr("data-code")),$("#bank-currency").val($(this).attr("data-currency")),$("#fund-account").val($(this).attr("data-account")),$("#bank-center").val($(this).attr("center-code")),$("#bank-ul .hover").removeClass("hover"),$(this).addClass("hover"),4==$(this).attr("balnceFlag")?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==$(this).attr("balnceFlag")?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==$(this).attr("balnceFlag")?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==$(this).attr("balnceFlag")?($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")):0!=$(this).attr("balnceFlag")&&$(this).attr("balnceFlag")||($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),oBank.innerHTML=$("#bank").val();var a=setLiCurrency($("#bank-currency").val());$("#currency-ul").empty(),$("#currency-ul").append(a),$("#result-account").html($("#bank-val").val()),$("#result-bank").html($("#bank-name").val()),$("#currency-ul li").click(function(){currencyCode=$(this).attr("currencyCode"),$("#currency").html($(this).val()),$("#currency-unit").val($(this).attr("currency-unit")),$("#currency-ul .hover").removeClass("hover"),$(this).addClass("hover"),oCurrency.innerHTML=$(this).html()})}),$(".currency-div").click(function(a){$("#bank-ul").addClass("hide"),$("#currency-ul").toggleClass("hide"),$("#currency").focus(),a.stopPropagation()}),$("#currency-ul li").click(function(){$("#currency").html($(this).val()),$("#currency-unit").val($(this).attr("currency-unit")),$("#currency-ul .hover").removeClass("hover"),$(this).addClass("hover"),oCurrency.innerHTML=$(this).html()})},pbE.WT().wtGeneralRequest(CID,6200,JSON.stringify({}))}function fundInView(){window.setLiBank=function(a){for(var e="",n={},r=0,d=a.length;r<d;r++){var t=a[r][214],s={56:[]};n.hasOwnProperty(t)?n[t][56].indexOf(a[r][56])<0&&n[t][56].push(a[r][56]):(s[56].push(a[r][56]),s[215]=a[r][215],s[216]=a[r][216],s[51]=a[r][51],s[353]=a[r][353],s[219]=a[r][219],s[214]=a[r][214],n[t]=s)}var c=0;for(var l in n)if(0==c){var i=l.slice(-4);e+='<li value="'+l+'" data-code="'+n[l][215]+'" data-name="'+n[l][216]+'" data-currency="'+n[l][56]+'" data-account="'+n[l][51]+'" center-code="'+n[l][353]+'" balnceFlag="'+n[l][219]+'" bank-account="'+n[l][214]+'" class="hover"><span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>",4==n[l][219]?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==n[l][219]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==n[l][219]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==n[l][219]&&($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),oBank.innerHTML='<span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>";var o=setLiCurrency(n[l][56]);$("#currency-ul").empty(),$("#currency-ul").append(o),$("#result-account").html(l),$("#result-bank").html(n[l][216]),bankCode=n[l][215],bankAccount=n[l][214],fundAccount=n[l][51],bankCenter=n[l][353],c++}else{var i=l.slice(-4);e+='<li value="'+l+'" data-code="'+n[l][215]+'" data-name="'+n[l][216]+'" data-currency="'+n[l][56]+'" data-account="'+n[l][51]+'" center-code="'+n[l][353]+'" balnceFlag="'+n[l][219]+'" bank-account="'+n[l][214]+'"><span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>",c++}return e}}function fundOutView(){window.setLiBank=function(a){for(var e="",n={},r=0,d=a.length;r<d;r++){var t=a[r][214],s={56:[]};n.hasOwnProperty(t)?n[t][56].indexOf(a[r][56])<0&&n[t][56].push(a[r][56]):(s[56].push(a[r][56]),s[215]=a[r][215],s[216]=a[r][216],s[51]=a[r][51],s[353]=a[r][353],s[218]=a[r][218],s[214]=a[r][214],n[t]=s)}var c=0;for(var l in n)if(0==c){var i=l.slice(-4);e+='<li value="'+l+'" data-code="'+n[l][215]+'" data-name="'+n[l][216]+'" data-currency="'+n[l][56]+'" data-account="'+n[l][51]+'" center-code="'+n[l][353]+'" balnceFlag="'+n[l][218]+'" bank-account="'+n[l][214]+'" class="hover"><span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>",4==n[l][218]?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==n[l][218]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==n[l][218]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==n[l][218]&&($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),oBank.innerHTML='<span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>";var o=setLiCurrency(n[l][56]);$("#currency-ul").empty(),$("#currency-ul").append(o),$("#result-account").html(l),$("#result-bank").html(n[l][216]),bankCode=n[l][215],bankAccount=n[l][214],fundAccount=n[l][51],bankCenter=n[l][353],c++}else{var i=l.slice(-4);e+='<li value="'+l+'" data-code="'+n[l][215]+'" data-name="'+n[l][216]+'" data-currency="'+n[l][56]+'" data-account="'+n[l][51]+'" center-code="'+n[l][353]+'" balnceFlag="'+n[l][218]+'" bank-account="'+n[l][214]+'"><span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>",c++}return e}}function callback(a){var e=parseJSON(a);if(6200==e.functionNO)if(e.jData[1]<0)alert(e.jData[2]);else{var n=e.jData.data,r=setLiBank(n);$("#bank-ul").empty(),$("#bank-ul").append(r)}else if(6203==e.functionNO)if(e.jData[1]<0)alert(e.jData[2]);else{pipeCode=e.jData.data[0][200];var d=e.jData.data[0][224];pipeCode?alert("请求已提交，请到转账记录页面查看"):!pipeCode&&d?alert("您的银行余额为："+d+"元"):pipeCode||d||alert("查询失败，请稍后再试")}else 6202!=e.functionNO&&6201!=e.functionNO||(e.jData[1]<0?alert(e.jData[2]):alert("提交银行处理"))}"undefined"==typeof pbE?(window.pbE={WT:function(){var a={wtGetCurrentConnectionCID:function(){},wtEncrypt:function(){},wtGeneralRequest:function(a,e){if(6200==e)var n={functionNO:6200,jData:{1:0,data:[{214:"1234561111111",215:11111111,216:"招商银行",56:0,51:2222222222,217:5,353:111,219:4},{214:"1234560222",215:11111111,216:"农业银行",56:0,51:2222222222,217:6,353:111,219:5},{214:"12345600789",215:11111111,216:"工商银行",56:0,51:2222222222,217:4,353:111,219:6}]}};else var n={functionNO:6203,jData:{1:0,data:[{200:0,224:123}]}};callback(JSON.stringify(n))}};return a}},$("#goBack").click(function(){location.href=document.referrer})):$("#goBack").click(function(){location.href="goBack"});var CID=pbE.WT().wtGetCurrentConnectionCID(),pipeCode,bankAccount,bankCode,fundAccount,currencyCode,bankCenter,oBank=document.getElementById("bank"),oCurrency=document.getElementById("currency"),fundPwd="",bankPwd="";