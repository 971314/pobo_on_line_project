function getCurrency(e){switch(e-=0){case 0:return"人民币";case 1:return"美元";case 2:return"港币";case 3:return"欧元";case 4:return"澳元";case 5:return"日元";case 6:return"台湾币";default:return"未知"}}function getUnit(e){switch(e-=0){case 0:return"元";case 1:return"美元";case 2:return"港币";case 3:return"欧元";case 4:return"澳元";case 5:return"日元";case 6:return"台币";default:return"未知"}}function JTrim(e){return e.replace(/(^\s*)|(\s*$)/g,"")}function queryBalance(){var e="",a="";if(!$("#moneyPwd").hasClass("hide")&&$("#bankPwd").hasClass("hide")){if(!$("#money-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码");e=pbWT.wtEncrypt(CID,$("#money-pwd").val())}else if($("#moneyPwd").hasClass("hide")||$("#bankPwd").hasClass("hide")){if($("#moneyPwd").hasClass("hide")&&!$("#bankPwd").hasClass("hide")){if(!$("#bank-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码");a=pbWT.wtEncrypt(CID,$("#bank-pwd").val())}}else{if(!$("#bank-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码");if($("#bank-pwd").val()&&!$("#money-pwd").val())return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码");e=pbWT.wtEncrypt(CID,$("#money-pwd").val()),a=pbWT.wtEncrypt(CID,$("#bank-pwd").val())}var n={214:bankAccount,215:bankCode,51:fundAccount,56:currencyCode,59:e,60:a,353:bankCenter};pbWT.wtGeneralRequest(CID,6203,JSON.stringify(n))}function closeBalance(){$(".my-modal").addClass("hide")}function confirmIn(){var e=(new RegExp("^[0-9]*$"),document.getElementById("inAmount")),a=document.getElementById("inBankPwd").value,n=document.getElementById("inFundPwd").value;if(""==JTrim(e.value))return $("#error").removeClass("hide"),void $("#error").html("请输入转账金额！");if(!/^[0-9]+(.[0-9]{1,8})?$/.test(e.value))return $("#error").removeClass("hide"),void $("#error").html("转账金额要为数字！");if($("#moneyPwd").hasClass("hide")||$("#bankPwd").hasClass("hide"))if($("#moneyPwd").hasClass("hide")&&!$("#bankPwd").hasClass("hide")){if(""==JTrim(a))return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码！");$("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val()),bankPwd=pbWT.wtEncrypt(CID,$("#inBankPwd").val())}else if(!$("#moneyPwd").hasClass("hide")&&$("#bankPwd").hasClass("hide")){if(""==JTrim(a))return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码！");$("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val()),fundPwd=pbWT.wtEncrypt(CID,$("#inFundPwd").val())}else $("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val());else{if(""==JTrim(a))return $("#error").removeClass("hide"),void $("#error").html("请输入银行密码！");if(""==JTrim(n))return $("#error").removeClass("hide"),void $("#error").html("请输入资金密码！");$("#error").addClass("hide"),$(".my-modal").removeClass("hide"),$(".my-modal-backdrop").click(function(){$(".my-modal").addClass("hide")}),$("#result-amount").html($("#inAmount").val()+$("#currency-unit").val()),fundPwd=pbWT.wtEncrypt(CID,$("#inFundPwd").val()),bankPwd=pbWT.wtEncrypt(CID,$("#inBankPwd").val())}}function cancelIn(){$(".my-modal").addClass("hide")}function completeIn(){$(".my-modal").addClass("hide"),$("#error").addClass("hide");var e={214:bankAccount,215:bankCode,51:fundAccount,56:currencyCode,59:fundPwd,60:bankPwd,220:$("#inAmount").val(),353:bankCenter};pbWT.wtGeneralRequest(CID,6202,JSON.stringify(e))}function completeOut(){$(".my-modal").addClass("hide"),$("#error").addClass("hide");var e={214:bankAccount,215:bankCode,51:fundAccount,56:currencyCode,59:fundPwd,60:bankPwd,220:$("#inAmount").val(),353:bankCenter};pbWT.wtGeneralRequest(CID,6201,JSON.stringify(e))}function setLiCurrency(e){for(var a="",n=0,r=e.length;n<r;n++)if(parseInt(e[n]+1)){var t=getCurrency(e[n]),d=getUnit(e[n]);0==n?(a+='<li data-currency="'+t+'" currency-unit="'+d+'" currencyCode="'+e[n]+'" class="hover">'+t+"</li>",oCurrency.innerHTML=t,$("#currency-unit").val(d),currencyCode=e[n]):a+='<li data-currency="'+t+'" currency-unit="'+d+'" currencyCode="'+e[n]+'">'+t+"</li>"}return a}function callback(e){var a=JSON.parse(e);if(6205==a.functionNO)if(a.jData[1]<0)alert(a.jData[2]);else{var n=a.jData.data;ReactDOM.render(React.createElement(RecContentsFutures,{contents:n}),document.getElementById("contents"))}else if(6200==a.functionNO)if(a.jData[1]<0)alert(a.jData[2]);else{var r=a.jData.data,t=setLiBank(r);$("#bank-ul").empty(),$("#bank-ul").append(t)}else if(6203==a.functionNO)if(a.jData[1]<0)alert(a.jData[2]);else{pipeCode=a.jData.data[0][200];var d=a.jData.data[0][224];pipeCode?alert("请求已提交，请到转账记录页面查看"):!pipeCode&&d?alert("您的银行余额为："+d+"元"):pipeCode||d||alert("查询失败，请稍后再试")}else 6202!=a.functionNO&&6201!=a.functionNO||(a.jData[1]<0?alert(a.jData[2]):alert("提交银行处理"))}function fundRecordsView(){ReactDOM.render(React.createElement(NavHeader,{name:"当日转账记录"}),document.getElementById("nav-header")),pbWT.wtGeneralRequest(CID,6205,JSON.stringify({}))}function bankUlEvent(e){$(document).ready(function(){$("body").click(function(){$("#bank-ul").addClass("hide"),$("#currency-ul").addClass("hide")}),$(".bank-div").click(function(e){$("#currency-ul").addClass("hide"),$("#bank-ul").toggleClass("hide"),$("#bank").focus(),e.stopPropagation()}),$("#bank-ul").on("click","li",function(){if(bankAccount=$(this).attr("value")||$(this).attr("bankAccount"),bankCode=$(this).attr("data-code"),currencyCode=$(this).attr("data-currency"),fundAccount=$(this).attr("data-account"),bankCenter=$(this).attr("center-code"),"balance"==e?$("#bank").html($(this).html()):($("#bank").val($(this).html()),$("#bank-name").val($(this).attr("data-name")),$("#bank-center").val($(this).attr("center-code"))),$("#bank-val").val($(this).attr("value")),$("#bank-code").val($(this).attr("data-code")),$("#bank-currency").val($(this).attr("data-currency")),$("#fund-account").val($(this).attr("data-account")),$("#bank-ul .hover").removeClass("hover"),$(this).addClass("hover"),4==$(this).attr("balnceFlag")?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==$(this).attr("balnceFlag")?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==$(this).attr("balnceFlag")?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==$(this).attr("balnceFlag")?($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")):0!=$(this).attr("balnceFlag")&&$(this).attr("balnceFlag")||($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),"balance"!=e){oBank.innerHTML=$("#bank").val();var a=setLiCurrency($("#bank-currency").val());$("#currency-ul").empty(),$("#currency-ul").append(a),$("#result-account").html($("#bank-val").val()),$("#result-bank").html($("#bank-name").val()),$("#currency-ul li").click(function(){currencyCode=$(this).attr("currencyCode"),$("#currency").html($(this).val()),$("#currency-unit").val($(this).attr("currency-unit")),$("#currency-ul .hover").removeClass("hover"),$(this).addClass("hover"),oCurrency.innerHTML=$(this).html()})}}),$(".currency-div").click(function(e){$("#bank-ul").addClass("hide"),$("#currency-ul").toggleClass("hide"),$("#currency").focus(),e.stopPropagation()}),$("#currency-ul li").click(function(){$("#currency").html($(this).val()),$("#currency-unit").val($(this).attr("currency-unit")),$("#currency-ul .hover").removeClass("hover"),$(this).addClass("hover"),oCurrency.innerHTML=$(this).html()})})}function bankBalanceView(){window.setLiBank=function(e){for(var a="",n=0,r=e.length;n<r;n++)if(0==n){var t=e[n][214].slice(-4);a+='<li value="'+e[n][214]+'" data-code="'+e[n][215]+'" data-currency="'+e[n][56]+'" data-account="'+e[n][51]+'" balnceFlag="'+e[n][217]+'" class="hover">'+e[n][216]+'<span class="d8">(尾号'+t+")</span></span></li>",bankAccount=e[n][214],bankCode=e[n][215],currencyCode=e[n][56],fundAccount=e[n][51],bankCenter=e[n][353],4==e[n][217]?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==e[n][217]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==e[n][217]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==e[n][217]&&($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),$("#bank").html('<span class="b1">'+e[n][216]+'<span class="d8">(尾号'+t+")</span></span>"),$("#fund-account").val(e[n][51]),$("#bank-currency").val(e[n][56]),$("#bank-val").val(e[n][214]),$("#bank-code").val(e[n][215]),$("#bank").val(e[n][216])}else{var t=e[n][214].slice(-4);a+='<li value="'+e[n][214]+'" data-code="'+e[n][215]+'" data-center="'+e[n][353]+'" data-currency="'+e[n][56]+'" data-account="'+e[n][51]+'" balnceFlag="'+e[n][217]+'">'+e[n][216]+'<span class="d8">(尾号'+t+")</span></span></li>"}return a},pbWT.wtGeneralRequest(CID,6200,JSON.stringify({})),bankUlEvent("balance")}function fundInOutView(){window.setLiBank=function(e){for(var a="",n={},r=0,t=e.length;r<t;r++){var d=e[r][214],c={56:[]};n.hasOwnProperty(d)?n[d][56].indexOf(e[r][56])<0&&n[d][56].push(e[r][56]):(c[56].push(e[r][56]),c[215]=e[r][215],c[216]=e[r][216],c[51]=e[r][51],c[353]=e[r][353],c[219]=e[r][219],c[214]=e[r][214],n[d]=c)}var s=0;for(var l in n)if(0==s){var i=l.slice(-4);a+='<li value="'+l+'" data-code="'+n[l][215]+'" data-name="'+n[l][216]+'" data-currency="'+n[l][56]+'" data-account="'+n[l][51]+'" center-code="'+n[l][353]+'" balnceFlag="'+n[l][219]+'" bank-account="'+n[l][214]+'" class="hover"><span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>",4==n[l][219]?($("#moneyPwd").removeClass("hide"),$("#bankPwd").addClass("hide")):5==n[l][219]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").addClass("hide")):6==n[l][219]?($("#bankPwd").removeClass("hide"),$("#moneyPwd").removeClass("hide")):7==n[l][219]&&($("#bankPwd").addClass("hide"),$("#moneyPwd").addClass("hide")),oBank.innerHTML='<span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>";var o=setLiCurrency(n[l][56]);$("#currency-ul").empty(),$("#currency-ul").append(o),$("#result-account").html(l),$("#result-bank").html(n[l][216]),bankCode=n[l][215],bankAccount=n[l][214],fundAccount=n[l][51],bankCenter=n[l][353],s++}else{var i=l.slice(-4);a+='<li value="'+l+'" data-code="'+n[l][215]+'" data-name="'+n[l][216]+'" data-currency="'+n[l][56]+'" data-account="'+n[l][51]+'" center-code="'+n[l][353]+'" balnceFlag="'+n[l][219]+'" bank-account="'+n[l][214]+'"><span class="b1">'+n[l][216]+'<span class="d8">(尾号'+i+")</span></span>",s++}return a},pbWT.wtGeneralRequest(CID,6200,JSON.stringify({})),bankUlEvent("")}var CID=pbWT.wtGetCurrentConnectionCID(),pipeCode,bankAccount,bankCode,fundAccount,currencyCode,bankCenter,oBank=document.getElementById("bank"),oCurrency=document.getElementById("currency"),fundPwd="",bankPwd="";