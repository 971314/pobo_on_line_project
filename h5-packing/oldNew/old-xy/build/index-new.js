function decimalDecPrice(e,t){t+="";var n=t.indexOf("."),a=t.length;return t=n>=0&&a-1-n>=e?t.substr(0,t.indexOf(".")+e+1):(t-0).toFixed(e)}function showCon(){var e=pbEngine.readConfig("PbHomeThreeContracts.json");if(e){contract=JSON.parse(e);var t=["000001","399001","399006"];if(2==contract.length){var n=t.indexOf(contract[0].code),a=t.indexOf(contract[1].code);if(0>n&&0>a)contract.unshift({market:"1001",name:"创业板指",code:"399006"});else if(n>=0&&a>=0){var s=contract0;contract0.remove(s[n]),contract0.remove(s[a]),contract.unshift(contract0[0])}else 0>n&&a>=0?(contract0.splice(a,1),contract.unshift(contract0[1])):n>=0&&0>a&&(contract0.splice(n,1),contract.unshift(contract0[1]))}else if(1==contract.length){var n=t.indexOf(contract[0].code);0>n?(contract.unshift(contract0[2]),contract.unshift(contract0[1])):n>=0&&(contract0.splice(n,1),contract.unshift(contract0[1]),contract.unshift(contract0[0]))}}for(var c=0;c<contract.length;c++)marketData.push({2:contract[c].market,3:contract[c].code});symbolData[1]=marketData,pbEngine.hqSubscribe(0,JSON.stringify(symbolData))}function callback(e){var t=JSON.parse(e);if(90004==t.moduleId){var n=t.jData.Indexes.slice(0,10);ReactDOM.render(React.createElement(InfoList,{contents:n,dir:"pobo:info/"}),document.getElementById("info-list"))}else if(9e4==t.moduleId){for(var a=t.jData.Data,s=0;s<contract.length;s++){var c=0,o=pbEngine.getHQPriceRate(contract[s].code,contract[s].market),i=JSON.parse(pbEngine.getHQZDInfo(contract[s].code,contract[s].market));contract[s].rate=o,contract[s].zd=i.HQZD,contract[s].zdf=i.HQZDF,contract[s].groupflag=pbEngine.getHQGroupFlag(contract[s].code,contract[s].market),contract[s].decimal=pbEngine.getHQPriceDecimal(contract[s].code,contract[s].market);for(var r=0;r<a.length;r++)contract[s].code==a[r][10]&&(a[r][29]?(c=(a[r][29]-0)/contract[s].rate,c=decimalDecPrice(contract[s].decimal,c),contract[s].price=c):a[r][29]||(contract[s].price="--"))}for(var s=0;3>s;s++){var d=$("#market-chg-"+s+" span");$("#market-href-"+s).attr("href","pobo:pageId=801001&market="+contract[s].market+"&code="+contract[s].code+"&groupflag="+contract[s].groupflag+"&hideflag=0"),$("#market-name-"+s).html(contract[s].name),contract[s].zd>0?($("#market-price-"+s+" img").removeClass("hide"),$("#market-price-"+s+" img").attr("src","images/high.png"),$("#market-price-"+s).removeClass().addClass("a3"),$("#market-chg-"+s).removeClass().addClass("e3"),d[0].innerHTML=contract[s].zd,d[1].innerHTML=contract[s].zdf):contract[s].zd<0?($("#market-price-"+s+" img").removeClass("hide"),$("#market-price-"+s+" img").attr("src","images/low.png"),$("#market-price-"+s).removeClass().addClass("a4"),$("#market-chg-"+s).removeClass().addClass("e4"),d[0].innerHTML=contract[s].zd,d[1].innerHTML=contract[s].zdf):0==contract[s].zd?($("#market-price-"+s+" img").addClass("hide"),$("#market-price-"+s).removeClass().addClass("a1"),$("#market-chg-"+s).removeClass().addClass("e1"),d[0].innerHTML=contract[s].zd,d[1].innerHTML="0%"):isNaN(contract[s].zd)&&($("#market-price-"+s+" img").addClass("hide"),$("#market-price-"+s).removeClass().addClass("a1"),$("#market-chg-"+s).removeClass().addClass("e1"),d[0].innerHTML=contract[s].zd,d[1].innerHTML=contract[s].zdf),$("#market-price-"+s+" span").html(contract[s].price)}}}function reload(){pbEngine.queryInfoListWithJson(JSON.stringify(newsListData)),symbolData={},marketData=[],contract0=[{market:"1038",name:"上证指数",code:"000001"},{code:"399001",market:"1001",name:"深证成指"},{market:"1001",name:"创业板指",code:"399006"}],contract=contract0,showCon(),custom1=pbEngine.readLocalFile("H5LocalData1.json"),show=custom1?JSON.parse(custom1):iconInit,custom2=show.contents,custom=[];for(var e=0;e<custom2.length;e++)"1"==custom2[e].checked&&custom.push(custom2[e]);if(keep.length==custom.length){for(var t=0;t<custom.length&&custom[t].title==keep[t].title;t++);if(t>=custom.length)return}keep=custom;var a,n=custom.length;if(4>n?(a=1,ReactDOM.render(React.createElement(CustButtonO,{button:custom}),document.getElementById("customized"))):n>=4&&8>n?(a=1,ReactDOM.render(React.createElement(CustButtonT,{button:custom}),document.getElementById("customized"))):n>=8&&12>n?(a=2,ReactDOM.render(React.createElement(CustButtonTh,{button:custom}),document.getElementById("customized"))):n>=12&&16>n?(a=2,ReactDOM.render(React.createElement(CustButtonF,{button:custom}),document.getElementById("customized"))):n>=16&&20>n?(a=3,ReactDOM.render(React.createElement(CustButtonFi,{button:custom}),document.getElementById("customized"))):n>=20&&24>n&&(a=3,ReactDOM.render(React.createElement(CustButtonS,{button:custom}),document.getElementById("customized"))),a>=2){$("#customized .area>div").css("float","left"),$("#customized").css("margin-bottom","0"),$("#customized").css("padding-bottom","8px"),$("#customized").css("border-bottom","");var s=document.documentElement.clientWidth;$(".btn-group").css("width",s),$(".btn-group>div").css("width",s/4),$("#customized .area").css("width",s*a),$("#customized .area>div").css("width",s),2==a?($("#ind3").addClass("hide"),$("#ind1").removeClass(),$("#ind2").removeClass(),$("#ind1").addClass("ind"),$(document).ready(function(){try{var e=new IScroll("#customized",{eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1,snap:".btn-wrap",tap:!0,mouseWheelSpeed:10});e.on("scrollEnd",function(){this.x>=0?($("#ind2").removeClass(),$("#ind1").addClass("ind")):this.x<0&&this.x>=-s&&($("#ind1").removeClass(),$("#ind2").addClass("ind"))})}catch(t){}})):3==a&&($("#ind1").removeClass(),$("#ind2").removeClass(),$("#ind3").removeClass(),$("#ind1").addClass("ind"),$(document).ready(function(){try{var e=new IScroll("#customized",{eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1,snap:".btn-wrap",tap:!0,mouseWheelSpeed:10});e.on("scrollEnd",function(){this.x>=0?($("#ind2").removeClass(),$("#ind3").removeClass(),$("#ind1").addClass("ind")):this.x<0&&this.x>=-s?($("#ind1").removeClass(),$("#ind3").removeClass(),$("#ind2").addClass("ind")):this.x<-s&&this.x>=-(2*s)&&($("#ind1").removeClass(),$("#ind2").removeClass(),$("#ind3").addClass("ind"))})}catch(t){}}))}else 2>a&&($("#customized .area>div").css("float",""),$("#customized").css("padding-bottom","8px"),$("#customized .area").css("margin-bottom","0"),$("#customized").css("border-bottom",""),$("#ind1").addClass("hide"),$("#ind2").addClass("hide"),$("#ind3").addClass("hide"))}Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};for(var bannerCon=$("#carousel-example-generic"),bannerS="",bannerS2="",i=0;i<bannerConfig.length;i++){var banner=bannerConfig[i];bannerS+="<a class='item"+(i?"":" active")+"'"+(banner.url?" href='"+banner.url+"'":"")+"><img src='"+banner.img+"'/></a>",bannerS2+="<li data-target='#carousel-example-generic' data-slide-to='"+i+"'"+(i?"":" class='active'")+"></li> "}bannerCon.find(".carousel-inner").html(bannerS),bannerCon.find(".carousel-indicators").html(bannerS2);var newsListData={type:"mu",groupIDs:["10101"],doc:"json",count:"10"};pbEngine.queryInfoListWithJson(JSON.stringify(newsListData));var symbolData={},marketData=[],contract0=[{market:"1038",name:"上证指数",code:"000001"},{code:"399001",market:"1001",name:"深证成指"},{market:"1001",name:"创业板指",code:"399006"}],contract=contract0;showCon();var custom1=pbEngine.readLocalFile("H5LocalData1.json");if(custom1){var show=JSON.parse(custom1);if(!show.version||!show.checkedVer||show.version<iconInit.version)show=iconInit,pbEngine.writeLocalFile("H5LocalData1.json",JSON.stringify(show));else if(show.version==iconInit.version&&show.checkedVer<iconInit.checkedVer){for(var i=0;i<show.contents.length;i++)for(var j=0;j<iconInit.contents.length;j++)if(show.contents[i].id==iconInit.contents[j].id){if(show.contents[i].title==iconInit.contents[j].title&&show.contents[i].image1==iconInit.contents[j].image1&&show.contents[i].image2==iconInit.contents[j].image2&&show.contents[i].url==iconInit.contents[j].url)break;show.contents[i]=iconInit.contents[j],show.contents[i].checked="0";break}pbEngine.writeLocalFile("H5LocalData1.json",JSON.stringify(show))}}else{var show=iconInit;pbEngine.writeLocalFile("H5LocalData1.json",JSON.stringify(show))}for(var custom2=show.contents,custom=[],i=0;i<custom2.length;i++)"1"==custom2[i].checked&&custom.push(custom2[i]);keep=custom;var length=custom.length,num;if(4>length?(num=1,ReactDOM.render(React.createElement(CustButtonO,{button:custom}),document.getElementById("customized"))):length>=4&&8>length?(num=1,ReactDOM.render(React.createElement(CustButtonT,{button:custom}),document.getElementById("customized"))):length>=8&&12>length?(num=2,ReactDOM.render(React.createElement(CustButtonTh,{button:custom}),document.getElementById("customized"))):length>=12&&16>length?(num=2,ReactDOM.render(React.createElement(CustButtonF,{button:custom}),document.getElementById("customized"))):length>=16&&20>length?(num=3,ReactDOM.render(React.createElement(CustButtonFi,{button:custom}),document.getElementById("customized"))):length>=20&&24>length&&(num=3,ReactDOM.render(React.createElement(CustButtonS,{button:custom}),document.getElementById("customized"))),num>=2){$("#customized .area>div").css("float","left"),$("#customized").css("margin-bottom","0"),$("#customized").css("padding-bottom","8px"),$("#customized").css("border-bottom","");var width=document.documentElement.clientWidth;$(".btn-group").css("width",width),$(".btn-group>div").css("width",width/4),$("#customized .area").css("width",width*num),$("#customized .area>div").css("width",width),2==num?($("#ind3").addClass("hide"),$("#ind1").removeClass(),$("#ind2").removeClass(),$("#ind1").addClass("ind"),$(document).ready(function(){try{var e=new IScroll("#customized",{eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1,snap:".btn-wrap",tap:!0,mouseWheelSpeed:10});e.on("scrollEnd",function(){this.x>=0?($("#ind2").removeClass(),$("#ind1").addClass("ind")):this.x<0&&this.x>=-width&&($("#ind1").removeClass(),$("#ind2").addClass("ind"))})}catch(t){}})):3==num&&($("#ind1").removeClass(),$("#ind2").removeClass(),$("#ind3").removeClass(),$("#ind1").addClass("ind"),$(document).ready(function(){try{var e=new IScroll("#customized",{eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1,snap:".btn-wrap",tap:!0,mouseWheelSpeed:10});e.on("scrollEnd",function(){this.x>=0?($("#ind2").removeClass(),$("#ind3").removeClass(),$("#ind1").addClass("ind")):this.x<0&&this.x>=-width?($("#ind1").removeClass(),$("#ind3").removeClass(),$("#ind2").addClass("ind")):this.x<-width&&this.x>=-(2*width)&&($("#ind1").removeClass(),$("#ind2").removeClass(),$("#ind3").addClass("ind"))})}catch(t){}}))}else 2>num&&($("#customized .area>div").css("float",""),$("#customized").css("padding-bottom","8px"),$("#customized .area").css("margin-bottom","0"),$("#customized").css("border-bottom",""),$("#ind1").addClass("hide"),$("#ind2").addClass("hide"),$("#ind3").addClass("hide"));