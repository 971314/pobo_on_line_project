var nameCode="",option={callbacks:[{module:9e4,callback:function(e){for(var t=mag.jData.Data,i=0;i<t.length;i++)t[i][10]==nameCode&&$("#newPrice").html(t[i][29])}},{fun:6014,callback:function(e){e.jData.data[0]?($("#openNum").html(e.jData.data[0][137]),console.log(e.jData.data[0][137])):$("#openNum").html(0)}}],reload:function(){},refresh:function(){},fresh:function(){},doShow:function(e){}};pbPage.initPage(option),new Vue({el:"#conditionList",data:{noneTouchOne:!1,isTouchOne:!0,noneTouchTwo:!0,isTouchTwo:!1,noneTouchThree:!0,isTouchThree:!1,initImg:!0,conPrice:!0,conTime:!0,validPrice:!0,validTime:!0,buyPrice:!0,buyTime:!0,openCang:!0,pingCang:!0,pingDay:!0,pingCangBlue:!1,openCangFFF:!1,pingDayBlue:!1,initSetAdd:!0,editSetDiv:!1,reSetValue:"",initPrice:!0,initTime:!1,initFooter:!0,initCondition:!0,initAddBtn:!0,blueBtn:!1,trustPriceType:1,noneConTouchList:"",isConTouchListObj:{},contentNoneList:"",selectContract:"",selectContractName:"选择期货合约",setDataObj:{contractMarket:"",contractCode:"",validity:1,tj:1,tjTime:"19:50:00",Operator:"<=",tjPriceValue:"",dealOpen:0,OffsetFlag:0,Volume:"",LimitPriceType:"",LimitPrice:"",priceName:""},conNoneTouchObj:{conditionID:"",clientFlag:"",serverFlag:""},touchTimeValue:{HH:"10",mm:"05",ss:"00"},noneTouchConID:[],editQueryInfo:{HYDM:"",contractEditCode:"",imeConditionEdit:"",ConditionChoicedEdit:"",OperatorEdit:"",valueEdit:"",dealOpenEdit:"",OffsetFlagEdit:"",VolumeEdit:"",LimitPriceTypeEdit:"",LimitPriceEdit:"",priceNameEdit:""},tjTimeEdit:{HH:"",mm:"",ss:""}},created:function(){var e=this;if(window.pbE){var t=pbE.ZX().getSelfStock(0);t&&(e.selectContract=JSON.parse(t))}else e.selectContract=[{name:"沪铜1702",market:"2001",code:"010002"},{name:"沪铝1702",market:"2001",code:"010102"},{name:"沪锌1702",market:"2001",code:"010302"},{name:"沪铅1702",market:"2001",code:"010902"},{name:"黄金1706",market:"2001",code:"010506"}];e.noneTouchClick(),$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:isConTouch,token:testToken,id:id,userID:10001,begin:1,total:100,type:contractType}),success:function(t){if(0==t.status){var i=[];console.log(t),console.log(JSON.parse(t.data[0].conditionValue)),$.each(t.data,function(e,t){var o,n=JSON.parse(t.conditionValue).ConditionChoiced;2==n&&(o=JSON.parse(t.conditionValue).ConditionList[1]),i.push({createTime:t.createTime,HYDM:t.HYDM,type:t.ConditionChoiced,touchTime:o})}),e.isConTouchListObj.attr=i}},error:function(){console.log("服务器异常！")}})},methods:{noneTouchClick:function(){var e=this;$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:noneConTouch,token:testToken,id:id,userID:10001,begin:1,total:100,type:contractType}),success:function(t){0==t.status&&(console.log(t),e.noneConTouchList=t.data,$.each(t.data,function(t,i){e.noneTouchConID.push(i.conditionID)}))},error:function(){console.log("服务器异常！")}})},touchClick:function(e){if(0==e){var t=this;t.initCondition=!0,t.noneTouchOne=!1,t.isTouchOne=!0,t.noneTouchTwo=!0,t.isTouchTwo=!1,t.noneTouchThree=!0,t.isTouchThree=!1,t.initImg=!0,t.initFooter=!0}if(1==e){var t=this;t.initCondition=!0,t.noneTouchTwo=!1,t.isTouchTwo=!0,t.noneTouchOne=!0,t.isTouchOne=!1,t.noneTouchThree=!0,t.isTouchThree=!1,t.initImg=!0,t.initFooter=!0}if(2==e){var t=this;t.initSetAdd=!0,t.editSetDiv=!1,t.noneTouchThree=!1,t.isTouchThree=!0,t.noneTouchOne=!0,t.isTouchOne=!1,t.noneTouchTwo=!0,t.isTouchTwo=!1,t.initImg=!1,t.reSetValue="重置",t.initFooter=!1}},conditionClick:function(e){var t=this;0==e&&(t.conPrice=!0,t.conTime=!0,t.initPrice=!0,t.initFooter=!1,t.setDataObj.tj=1,t.editQueryInfo.ConditionChoicedEdit=1),1==e&&(t.conPrice=!1,t.conTime=!1,t.initPrice=!1,t.initFooter=!1,this.setDataObj.tj=2,t.editQueryInfo.ConditionChoicedEdit=2)},validDateClick:function(e){var t=this;0==e&&(t.validPrice=!0,t.validTime=!0,t.setDataObj.validity=1,t.editQueryInfo.imeConditionEdit=1),1==e&&(t.validPrice=!1,t.validTime=!1,t.setDataObj.validity=2,t.editQueryInfo.imeConditionEdit=2)},buyClick:function(e){var t=this;0==e&&(t.buyPrice=!0,t.buyTime=!0,t.setDataObj.dealOpen=0,t.editQueryInfo.dealOpenEdit=0),1==e&&(t.buyPrice=!1,t.buyTime=!1,t.setDataObj.dealOpen=1,t.editQueryInfo.dealOpenEdit=1)},storehouseTypeClick:function(e){var t=this;0==e&&(t.openCang=!0,t.openCangFFF=!1,t.pingCangBlue=!1,t.pingDayBlue=!1,t.setDataObj.OffsetFlag=0,t.editQueryInfo.OffsetFlagEdit=0),1==e&&(t.pingCangBlue=!0,t.openCang=!1,t.openCangFFF=!0,t.pingDayBlue=!1,t.setDataObj.OffsetFlag=1,t.editQueryInfo.OffsetFlagEdit=1),2==e&&(t.pingDayBlue=!0,t.pingCangBlue=!1,t.openCang=!1,t.openCangFFF=!0,t.setDataObj.OffsetFlag=2,t.editQueryInfo.OffsetFlagEdit=2)},priceInfoClick:function(e){this.trustPriceType=2,1==e&&(this.setDataObj.priceName="涨停价",this.editQueryInfo.priceNameEdit="涨停价"),2==e&&(this.setDataObj.priceName="跌停价",this.editQueryInfo.priceNameEdit="跌停价"),3==e&&(this.setDataObj.priceName="对手价",this.editQueryInfo.priceNameEdit="对手价"),4==e&&(this.setDataObj.priceName="最新价",this.editQueryInfo.priceNameEdit="最新价")},selectContractClick:function(e,t,i){this.selectContractName=e,this.setDataObj.contractMarket=t,this.setDataObj.contractCode=i,this.editQueryInfo.contractEditCode=i,this.editQueryInfo.HYDM=t,window.pbE&&(nameCode=i,pbE.HQ().hqSubscribe(0,JSON.stringify({1:[{2:t,3:i}]})),CID=pbE.WT().wtGetCurrentConnectionCID(),pbE.WT().wtGeneralRequest(CID,6014,JSON.stringify({54:t,63:i})))},priceTypeClick:function(){">="==this.setDataObj.Operator?this.setDataObj.Operator="<=":this.setDataObj.Operator=">="},trustFocus:function(){this.setDataObj.priceName=""},trustPrice:function(e){this.trustPriceType=e},conNoneClick:function(e,t,i){this.conNoneTouchObj={conditionID:e,clientFlag:t,serverFlag:i},console.log(this.conNoneTouchObj)},conStopOrOnClick:function(e){var t=this;if(1!=e&&2!=e||$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:conStopOrOn,token:testToken,id:id,type:e,conditionID:t.conNoneTouchObj.conditionID}),success:function(i){0==i.status&&(t.noneTouchClick(),1==e&&console.log("暂停成功！"),2==e&&console.log("运行成功！"))},error:function(){console.log("服务器异常！")}}),3==e){var t=this;$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:conIdQuery,token:testToken,id:id,userID:10001,type:contractType,data:[t.conNoneTouchObj.conditionID]}),success:function(e){if(0==e.status){console.log(e.data),console.log(JSON.parse(e.data[0].conditionValue));var i,o,n,r=JSON.parse(e.data[0].conditionValue);1==r.ConditionChoiced?(i=r.ConditionList[0].Price.Value,o=r.ConditionList[0].Price.Operator):2==r.ConditionChoiced&&(n=r.ConditionList[1].Time);var a;2==t.trustPriceType?a=r.OrderAction.SmartOrder.Order.LimitPriceType:1==t.trustPriceType&&(a=r.OrderAction.SmartOrder.Order.LimitPrice),t.editQueryInfo={HYDM:r.Contracts[0].ContractCode,contractEditCode:r.Contracts[0].ExchangeCode,imeConditionEdit:r.imeCondition,ConditionChoicedEdit:r.ConditionChoiced,OperatorEdit:o,valueEdit:i,tjTimeEdit:n,dealOpenEdit:r.OrderAction.SmartOrder.Order.Direction,OffsetFlagEdit:r.OrderAction.SmartOrder.Order.OffsetFlag,VolumeEdit:r.OrderAction.SmartOrder.Order.Volume,LimitPriceTypeEdit:r.OrderAction.SmartOrder.Order.LimitPriceType,LimitPriceEdit:r.OrderAction.SmartOrder.Order.LimitPrice,priceNameEdit:a},console.log(t.editQueryInfo),t.initCondition=!1,t.initSetAdd=!1,t.editSetDiv=!0,t.noneTouchThree=!1,t.isTouchThree=!0,t.noneTouchOne=!0,t.isTouchOne=!1,t.noneTouchTwo=!0,t.isTouchTwo=!1,t.initImg=!1,t.reSetValue="",t.initFooter=!1,1==r.imeCondition?(t.validPrice=!0,t.validTime=!0):2==r.imeCondition&&(t.validPrice=!1,t.validTime=!1),1==r.ConditionChoiced&&(t.conPrice=!0,t.conTime=!0,t.initPrice=!0,t.initFooter=!1),2==r.ConditionChoiced&&(t.conPrice=!1,t.conTime=!1,t.initPrice=!1,t.initFooter=!1),0==r.OrderAction.SmartOrder.Order.Direction&&(t.buyPrice=!0,t.buyTime=!0),1==r.OrderAction.SmartOrder.Order.Direction&&(t.buyPrice=!1,t.buyTime=!1),0==r.OrderAction.SmartOrder.Order.OffsetFlag&&(t.openCang=!0,t.openCangFFF=!1,t.pingCangBlue=!1,t.pingDayBlue=!1),1==r.OrderAction.SmartOrder.Order.OffsetFlag&&(t.pingCangBlue=!0,t.openCang=!1,t.openCangFFF=!0,t.pingDayBlue=!1),2==r.OrderAction.SmartOrder.Order.OffsetFlag&&(t.pingDayBlue=!0,t.pingCangBlue=!1,t.openCang=!1,t.openCangFFF=!0),1==r.ConditionChoiced?(t.conPrice=!0,t.conTime=!0,t.initPrice=!0,t.initFooter=!1):2==r.ConditionChoiced&&(t.conPrice=!1,t.conTime=!1,t.initPrice=!1,t.initFooter=!1),console.log("根据条件单查询记录成功！")}},error:function(){console.log("服务器异常！")}})}4==e&&$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:delCon,token:testToken,id:id,type:contractType,data:[t.conNoneTouchObj.conditionID]}),success:function(e){0==e.status&&(t.noneTouchClick(),console.log("删除成功！"))},error:function(){console.log("服务器异常！")}}),5==e&&(console.log(t.noneTouchConID),$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:delCon,token:testToken,id:id,type:contractType,data:t.noneTouchConID}),success:function(e){0==e.status&&(t.noneTouchClick(),console.log("删除成功！"))},error:function(){console.log("服务器异常！")}}))},opinionBlur:function(){var e=this;e.selectContractName&&e.setDataObj.tjPriceValue&&e.setDataObj.priceName&&e.setDataObj.Volume?(e.blueBtn=!0,e.initAddBtn=!1):(e.selectContractName||e.setDataObj.tjPriceValue||e.setDataObj.priceName||e.setDataObj.Volume)&&(e.blueBtn=!1,e.initAddBtn=!0)},addContractInfo:function(){var e=this,t=new setConData;t.Contracts[0]={ExchangeCode:e.setDataObj.contractMarket,ContractCode:e.setDataObj.contractCode},t.imeCondition=e.setDataObj.validity,t.ConditionChoiced=e.setDataObj.tj,1==e.setDataObj.tj&&(t.ConditionList[0].Price.Operator=e.setDataObj.Operator,t.ConditionList[0].Price.Value=e.setDataObj.tjPriceValue),2==e.setDataObj.tj&&(t.Contracts[0].Time=e.touchTimeValue.HH+":"+e.touchTimeValue.mm+":"+e.touchTimeValue.ss),t.OrderAction.SmartOrder.Order.Contract={ExchangeCode:e.setDataObj.contractMarket,ContractCode:e.setDataObj.contractCode},t.OrderAction.SmartOrder.Order.Direction=e.setDataObj.dealOpen,t.OrderAction.SmartOrder.Order.OffsetFlag=e.setDataObj.OffsetFlag,t.OrderAction.SmartOrder.Order.Volume=e.setDataObj.Volume,2==e.trustPriceType?t.OrderAction.SmartOrder.Order.LimitPriceType=e.setDataObj.priceName:1==e.trustPriceType&&(t.OrderAction.SmartOrder.Order.LimitPrice=e.setDataObj.priceName,t.OrderAction.SmartOrder.Order.LimitPriceType="CustomPrice"),console.log(t),$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:addContract,token:testToken,id:id,name:"",subtype:e.setDataObj.tj,SCDM:e.setDataObj.contractMarket,HYDM:e.selectContractName,type:contractType,terminal:"",userID:10001,data:t}),success:function(t){0==t.status&&(console.log("设置成功！"),$('#conNoneTouch a[href="#noneTuch"]').tab("show"),e.initCondition=!0,e.noneTouchOne=!1,e.isTouchOne=!0,e.noneTouchTwo=!0,e.isTouchTwo=!1,e.noneTouchThree=!0,e.isTouchThree=!1,e.initImg=!0,e.initFooter=!0,e.noneTouchClick())},error:function(){console.log("服务器异常！")}})},editConClick:function(){var e=this,t=new setConData;t.Contracts[0]={ExchangeCode:e.editQueryInfo.HYDM,ContractCode:e.editQueryInfo.contractEditCode},t.imeCondition=e.editQueryInfo.imeConditionEdit,t.ConditionChoiced=e.editQueryInfo.ConditionChoicedEdit,1==e.editQueryInfo.ConditionChoicedEdit&&(t.ConditionList[0].Price.Operator=e.editQueryInfo.OperatorEdit,t.ConditionList[0].Price.Value=e.editQueryInfo.valueEdit),2==e.editQueryInfo.ConditionChoicedEdit&&(t.Contracts[0].Time=e.tjTimeEdit.HH+":"+e.tjTimeEdit.mm+":"+e.tjTimeEdit.ss),t.OrderAction.SmartOrder.Order.Contract={ExchangeCode:e.editQueryInfo.HYDM,ContractCode:e.editQueryInfo.contractEditCode},t.OrderAction.SmartOrder.Order.Direction=e.editQueryInfo.dealOpenEdit,t.OrderAction.SmartOrder.Order.OffsetFlag=e.editQueryInfo.OffsetFlagEdit,t.OrderAction.SmartOrder.Order.Volume=e.editQueryInfo.VolumeEdit,2==e.trustPriceType?t.OrderAction.SmartOrder.Order.LimitPriceType=e.editQueryInfo.priceNameEdit:1==e.trustPriceType&&(t.OrderAction.SmartOrder.Order.LimitPrice=e.setDataObj.priceNameEdit,t.OrderAction.SmartOrder.Order.LimitPriceType="LimitPriceType"),console.log(t),$.ajax({url:conditionUrl,method:"post",dataType:"json",contentType:"application/json;charest=utf-8",data:JSON.stringify({func:editCon,token:testToken,id:id,conditionID:e.conNoneTouchObj.conditionID,data:t}),success:function(t){0==t.status&&(console.log("修改成功！"),$('#conNoneTouch a[href="#noneTuch"]').tab("show"),e.initCondition=!0,e.noneTouchOne=!1,e.isTouchOne=!0,e.noneTouchTwo=!0,e.isTouchTwo=!1,e.noneTouchThree=!0,e.isTouchThree=!1,e.initImg=!0,e.initFooter=!0,e.noneTouchClick())},error:function(){console.log("服务器异常！")}})},clearSetInfo:function(){this.selectContractName="选择期货合约",this.touchTimeValue={HH:"",mm:"",ss:""},this.setDataObj={contractMarket:"",contractCode:"",validity:"",tj:"",tjTime:"",Operator:"<=",tjPriceValue:"",dealOpen:"",OffsetFlag:"",Volume:""},this.validPrice=!0,this.validTime=!0,this.setDataObj.validity=1,this.buyPrice=!0,this.buyTime=!0,this.setDataObj.dealOpen=0,this.conPrice=!0,this.conTime=!0,this.initPrice=!0,this.initFooter=!1,this.setDataObj.tj=0,this.openCang=!0,this.openCangFFF=!1,this.pingCangBlue=!1,this.pingDayBlue=!1,this.setDataObj.OffsetFlag=0}}}),Vue.extend({components:{VueTimepicker:VueTimepicker}});