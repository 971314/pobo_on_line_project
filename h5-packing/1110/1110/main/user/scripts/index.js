define("user/scripts/index.js",function(e,n,t){function i(){window.refresh=m,window.callback=function(e){return l(e)},window.reload=function(){o()},J&&(J.destroy(),J=null),C&&(C.destroy(),C=null),P?(_=pbE.HQ(),S=pbE.SYS(),I=pbE.INFO(),y=pbE.ZX(),u(JSON.parse(S.readConfig("main/conf/main.json")))):$.get("conf/main.json?"+Date.now(),u),o(),r(),c(),a(null),p(),m()}function a(e){var n={eleLead:E+"#quick_em",eleWrapper:E+"#quick_wrapper",eleScroll:E+"#quick_scroller",perCount:1,auto:!1,isScroll:!0};x.getQuickChannel(e,n)}function o(){var e=v.contracts;data=e.data,w=v.news;var n="";if(P){var t=y.getSelfStock(z),i=_.getHQZLHY(q),a=!0;if("undefined"==typeof t?(a=!1,n=JSON.parse(i)):n=JSON.parse(t).concat(JSON.parse(i)),$.bindEvent($(E+" #selfstock"),function(){a?window.open("pobo:uncheck=1&pageId=803000"):window.open("pobo:uncheck=1&pageId=801000")}),n)if(n.length>0&&n.length<3)data=n;else for(var o=0;o<n.length&&(data[o]=n[o],6!=o);o++);}if(!k||k.length!=data.length){for(var r="",o=0;o<3;o++)r+='<tr class="tit" id="market-href-'+o+'"><td class="tit"><strong id="market-name-'+o+'" class="market-name"></strong></td><td id="market-price-'+o+'"><span>--</span></td><td id="market-chg-'+o+'"><span>--</span></td><td id="market-chg1-'+o+'"><span>--</span></td>',r+="</tr>";$("#market").html(r)}for(var c=[],o=0;o<data.length;o++)if(c.push({2:data[o].market,3:data[o].code}),!P){$("#market-name-"+o).html(data[o].name),$("#market-price-"+o+" span").html(s(4,Math.random()));var d=$("#market-chg-"+o+" span"),l=$("#market-chg1-"+o+" span");d.html(s(2,Math.random())*(j-1)),l.html(s(2,Math.random())*(j-1)+"%")}k=data,P&&_.hqSubscribe(0,JSON.stringify({1:c}))}function r(){w.isShow?I.infoQueryListWithJson(JSON.stringify({type:"mu",groupIDs:w.data[0].ids,doc:"json",count:w.data[0].count})):$(E+" #information").parent().parent().hide()}function c(){var e={isShowWait:!1};N.getBannerAdvertise(null,function(e){var n="",t="";if(0==e.error_no){var i=e.results;$.each(i,function(e){n+=""==i[e].url?"<li><img src="+$.config.global.pictureUrl+i[e].picture+"/></li>":"<li><img src="+$.config.global.pictureUrl+i[e].picture+" href='pobo:uncheck=1&pageId=900005&url="+i[e].url+"' /></li>",t+=1==e?"<em class='active'></em>":"<em></em>"}),$(E+" #home_scroller").html(n),$(E+" #home_tabDiv").html(t);var a={eleImg:$(E+" #home_scroller"),width:"100%",height:"125px",lodingtimeout:13e3,loadFailed:"../images/logo_img01.png",loading:"../images/banner01.jpg",bindOnclick:!1};D.imgload(a,d()),$.each($(E+" #home_scroller").find("img"),function(){$.bindEvent($(this),function(){void 0!==$(this).attr("href")&&window.open($(this).attr("href"))},"click")}),d()}else $.alert("广告图片获取异常:"+e.error_info)},e)}function d(){if(!J){var e={wrapper:$(E+" #home_wrapper"),scroller:$(E+" #home_scroller"),perCount:1,showTab:!0,tabDiv:$(E+" #home_tabDiv"),auto:!0};J=new A(e)}}function s(e,n){n+="";var t=n.indexOf("."),i=n.length;return t>=0&&i-1-t>=e?n.substr(0,n.indexOf(".")+e+1):(n-0).toFixed(e)}function l(e){var n=JSON.parse(e);if(90004==n.moduleId){var t=$(E+" #news_date .cont");$.each(t,function(e){var t="<h5>"+n.jData.Indexes[e].Title.substring(6,n.jData.Indexes[e].Title.length)+"</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><span class='time'>"+H.timeBucket(n.jData.Indexes[e].Pubtime)+"</span>";$(this).html(t),$.bindEvent($(this),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/views/details.html?newsid="+n.jData.Indexes[e].ID+"&url_ids="+w.data[0].ids)})})}else if(9e4==n.moduleId){for(var i=n.jData.Data,a=0;a<k.length;a++){var o=0,r=_.hqGetPriceRate(k[a].code,k[a].market),c=JSON.parse(_.hqGetZDInfo(k[a].code,k[a].market));k[a].zd=c.HQZD,k[a].zdf=c.HQZDF,k[a].groupflag=_.hqGetGroupFlag(k[a].code,k[a].market),k[a].decimal=_.hqGetPriceDecimal(k[a].code,k[a].market);for(var d=0;d<i.length;d++)if(k[a].code==i[d][10]){i[d][29]?(o=(i[d][29]-0)/r,k[a].price=s(k[a].decimal,o)):k[a].price="--";break}void 0==k[a].price&&(k[a].price="--")}for(var a=0;a<k.length;a++){var l=$("#market-href-"+a).attr("href","pobo:uncheck=1&pageId=801001&market="+k[a].market+"&code="+k[a].code+"&groupflag="+k[a].groupflag+"&hideflag=1"),p=$("#market-price-"+a),u=$("#market-chg-"+a+" span"),m=$("#market-chg1-"+a+" span");$.bindEvent(l,function(){window.open($(this).attr("href"))},"click"),isNaN(k[a].zd)||(k[a].zd>0?(u.addClass("ared"),m.addClass("ared")):k[a].zd<0?(u.addClass("agreen"),m.addClass("agreen")):k[a].zdf="0%"),u.html(k[a].zd),m.html(k[a].zdf),p.find("span").html(k[a].price),$("#market-name-"+a).html(k[a].name)}}}function p(){var e,n=JSON.parse(S.getDeviceJsonInfo());for(var t in n)72==t&&(e=n[t]);var i={category_id:"noticeIndex",token:e,pageNum:1,pageSize:10},a={isShowWait:!1};N.getAnnouncement(i,function(e){if(0==e.error_no){var n=$(E+".notice_list"),t="",i=e.results[0].data,a=0;$.each(i,function(){a++>2||(t+="<li href='pobo:uncheck=1&pageId=900005&url=main/information/views/details.html?url_ids=10401&Pcategory_id=noticeIndex&category_id=noticeIndex&newsid="+this.id+"'><p>"+this.news_title+"</p><span class='time'>"+H.timeBucket(this.news_date)+"</span></li>")}),n.html(t),$.each(n.find("li"),function(){$.bindEvent($(this),function(){window.open($(this).attr("href"))},"click")})}else $.alert("公告获取异常:"+e.error_info)},a)}function u(e){v=e}function m(){if($.validatorUtils.isNotEmpty(pbE.SYS().getAppCertifyInfo("PbKey_H5_Home_Auth_Token"))){var e,n=pbE.SYS().getAppCertifyInfo("PbKey_H5_Home_Auth_LoginName"),t=pbE.SYS().getAppCertifyInfo("PbKey_H5_Home_Auth_Token"),i=pbE.SYS().getAppCertifyInfo("PbKey_H5_Home_Auth_UserId"),a=pbE.SYS().getDeviceJsonInfo();if(a){var o=JSON.parse(a);if(o[71]&&(F=o[71]),o[255]){var r=o[255];"2"==r?Q="iOS":"3"==r&&(Q="Android")}o[73]&&(T=o[73]),o.jgid&&(e=o.jgid)}var c={poboNumber:Y,uid:i,deviceId:F,OS:Q,vsersion:T,token:t,address:"",istoken:"1",orgNumber:e,login_mobile:n};O.userLogin(c,function(e){0==e.error_no||(pbE.SYS().clearAuthData(),setTimeout(function(){window.location.href="close"},"100"))},{isShowWait:!1})}}function f(){$.bindEvent($(E+" #information"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/views/index.html")}),$.bindEvent($(E+" #opinoin"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/userInfo/opinoinFeedback.html")}),$.bindEvent($(E+" #announcement"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/views/index.html?ids=10401&Pcategory_id=noticeIndex&category_id=noticeIndex")})}function h(){}function g(){}function b(){}var v,k,w,_,S,I,y,E="#index ",D=e("user/scripts/common/imgloading"),x=e("comOtherData"),N=e("commService").getInstance(),O=e("futures/services/userService").getInstance(),A=e("hIscroll"),H=e("common"),J=null,C=null,P="undefined"!=typeof pbE,z=100,q=100,Y="123",F="127.0.0.1",Q="Android",T="1.0.0.1",G={init:i,bindPageEvent:f,destroy:h,pageBack:g,load:b};t.exports=G});