define("user/scripts/index.js",function(e,n,t){function a(){window.callback=function(e){return l(e)},z&&(z.destroy(),z=null),J&&(J.destroy(),J=null),q?(w=pbE.HQ(),I=pbE.SYS(),_=pbE.INFO(),S=pbE.ZX(),m(JSON.parse(I.readConfig("main/conf/main.json")))):$.get("conf/main.json?"+Date.now(),m),o(),r(),c();var e=null;i(e),p()}function i(e){var n={eleLead:D+"#quick_em",eleWrapper:D+"#quick_wrapper",eleScroll:D+"#quick_scroller",perCount:1,auto:!1,isScroll:!0};E.getQuickChannel(e,n)}function o(){var e=b.contracts;data=e.data,v=b.news;var n="";if(q){var t=S.getSelfStock(C),a=w.getHQZLHY(F),i=!0;if("undefined"==typeof t&&(i=!1),n=t.concat(a),$.bindEvent($(D+" #selfstock"),function(){i?window.open("pobo:uncheck=1&pageId=803000"):window.open("pobo:uncheck=1&pageId=801000")}),n)if(n=JSON.parse(n),n.length>0&&n.length<3)data=n;else for(var o=0;o<n.length&&(data[o]=n[o],6!=o);o++);}if(!k||k.length!=data.length){for(var r="",o=0;o<3;o++)r+='<tr class="tit" id="market-href-'+o+'"><td class="tit"><strong id="market-name-'+o+'" class="market-name"></strong></td><td id="market-price-'+o+'"><span>--</span></td><td id="market-chg-'+o+'"><span>--</span></td><td id="market-chg1-'+o+'"><span>--</span></td>',r+="</tr>";$("#market").html(r)}for(var c=[],o=0;o<data.length;o++)if(c.push({2:data[o].market,3:data[o].code}),!q){$("#market-name-"+o).html(data[o].name),$("#market-price-"+o+" span").html(s(4,Math.random()));var d=$("#market-chg-"+o+" span"),l=$("#market-chg1-"+o+" span");d.html(s(2,Math.random())*(j-1)),l.html(s(2,Math.random())*(j-1)+"%")}k=data,q&&w.hqSubscribe(0,JSON.stringify({1:c}))}function r(){v.isShow?_.infoQueryListWithJson(JSON.stringify({type:"mu",groupIDs:v.data[0].ids,doc:"json",count:v.data[0].count})):$(D+" #information").parent().parent().hide()}function c(){var e={isShowWait:!1};O.getBannerAdvertise(null,function(e){var n="",t="";if(0==e.error_no){var a=e.results;$.each(a,function(e){n+="<li><img src="+$.config.global.pictureUrl+a[e].picture+" href='pobo:uncheck=1&pageId=900005&url="+a[e].url+"' /></li>",t+=1==e?"<em class='active'></em>":"<em></em>"}),$(D+" #home_scroller").html(n),$(D+" #home_tabDiv").html(t);var i={eleImg:$(D+" #home_scroller"),width:"100%",height:"125px",lodingtimeout:13e3,loadFailed:"../images/logo_img01.png",loading:"../images/banner01.jpg",bindOnclick:!0};x.imgload(i,d()),d()}else $.alert("广告图片获取异常:"+e.error_info)},e)}function d(){if(!z){var e={wrapper:$(D+" #home_wrapper"),scroller:$(D+" #home_scroller"),perCount:1,showTab:!0,tabDiv:$(D+" #home_tabDiv"),auto:!0};z=new N(e)}}function s(e,n){n+="";var t=n.indexOf("."),a=n.length;return t>=0&&a-1-t>=e?n.substr(0,n.indexOf(".")+e+1):(n-0).toFixed(e)}function l(e){var n=JSON.parse(e);if(90004==n.moduleId){var t=$(D+" #news_date .cont");$.each(t,function(e){var t="<h5>"+n.jData.Indexes[e].Title.substring(6,n.jData.Indexes[e].Title.length)+"</h5><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><span class='time'>"+y.timeBucket(n.jData.Indexes[e].Pubtime)+"</span>";$(this).html(t),$.bindEvent($(this),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/views/details.html?newsid="+n.jData.Indexes[e].ID+"&url_ids="+v.data[0].ids)})})}else if(9e4==n.moduleId){for(var a=n.jData.Data,i=0;i<k.length;i++){var o=0,r=w.hqGetPriceRate(k[i].code,k[i].market),c=JSON.parse(w.hqGetZDInfo(k[i].code,k[i].market));k[i].zd=c.HQZD,k[i].zdf=c.HQZDF,k[i].groupflag=w.hqGetGroupFlag(k[i].code,k[i].market),k[i].decimal=w.hqGetPriceDecimal(k[i].code,k[i].market);for(var d=0;d<a.length;d++)if(k[i].code==a[d][10]){a[d][29]?(o=(a[d][29]-0)/r,k[i].price=s(k[i].decimal,o)):k[i].price="--";break}void 0==k[i].price&&(k[i].price="--")}for(var i=0;i<k.length;i++){var l=$("#market-href-"+i).attr("href","pobo:uncheck=1&pageId=801001&market="+k[i].market+"&code="+k[i].code+"&groupflag="+k[i].groupflag+"&hideflag=1"),p=$("#market-price-"+i),m=$("#market-chg-"+i+" span"),u=$("#market-chg1-"+i+" span");$.bindEvent(l,function(){window.open($(this).attr("href"))},"click"),isNaN(k[i].zd)||(k[i].zd>0?(m.addClass("ared"),u.addClass("ared")):k[i].zd<0?(m.addClass("agreen"),u.addClass("agreen")):k[i].zdf="0%"),m.html(k[i].zd),u.html(k[i].zdf),p.find("span").html(k[i].price),$("#market-name-"+i).html(k[i].name)}}}function p(){var e,n=JSON.parse(I.getDeviceJsonInfo());for(var t in n)72==t&&(e=n[t]);var a={category_id:"notice_index",token:e,pageNum:1,pageSize:10},i={isShowWait:!1};O.getAnnouncement(a,function(e){if(0==e.error_no){var n=$(D+".notice_list"),t="",a=e.results[0].data,i=0;$.each(a,function(){i++>5||(t+="<li href='pobo:uncheck=1&pageId=900005&url=main/information/views/details.html?url_ids=10401&newsid="+this.id+"'><p>"+this.news_title+"</p><span class='time'>"+y.timeBucket(this.news_date)+"</span></li>")}),n.html(t),$.each(n.find("li"),function(){$.bindEvent($(this),function(){window.open($(this).attr("href"))},"click")})}else $.alert("公告获取异常:"+e.error_info)},i)}function m(e){b=e}function u(){$.bindEvent($(D+" #information"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/index.html")}),$.bindEvent($(D+" #opinoin"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/userInfo/opinoinFeedback.html")}),$.bindEvent($(D+" #announcement"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/views/index.html&url_ids=10401")})}function h(){}function f(){}function g(){}var b,k,v,w,I,_,S,D="#index ",x=e("user/scripts/common/imgloading"),E=e("comOtherData"),O=e("commService").getInstance(),N=e("hIscroll"),y=e("common"),z=null,J=null,q="undefined"!=typeof pbE,C=100,F=100,Q={init:a,bindPageEvent:u,destroy:h,pageBack:f,load:g};t.exports=Q});