define(function(e,t,a){function l(e){if(e.createTextRange){var t=document.selection.createRange();return t.setEndPoint("StartToStart",e.createTextRange()),t.text.length}if("number"==typeof e.selectionStart)return e.selectionStart}function i(e,t){if(t>e.value.length&&(t=e.value.length),e.createTextRange){var a=e.createTextRange();a.moveStart("character",t),a.collapse(),a.select()}else e.setSelectionRange&&(e.setSelectionRange(t,t),e.focus())}function n(e,t){var a=$(e);$.bindEvent(a,function(e){var l=a.val();l=l.replace(/[^\d]/g,"");var i=e.which;if(8!=i)switch(t+=""){case"0":a.val(r(l));break;case"1":a.val(s(l));break;case"2":a.val(u(l))}},"keydown")}function r(e){return e=e.replace(/(\d{3})/,"$1 "),e=e.replace(/(\d{4})/,"$1 ")}function s(e){return e.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")}function u(e){return e=e.replace(/(\d{6})/,"$1 "),e=e.replace(/(\d{14})/g,"$1 ")}var h={};a.exports=h,$.fn.bankInput=function(){var e=$(this);""!=e.val()&&e.val(e.val().replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ")),e.bind("keyup",function(e){var t=l($(this)[0]);this.value=this.value.replace(/\D/g,"");this.value;this.value=this.value.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ");var a,n=l($(this)[0]);if(this.value.length>=5&&(t+1!=n||this.value[t+1]||(a=!0)),t==n||a)return i($(this)[0],this.value.length),!1;var r=0;return 4!=t&&9!=t&&14!=t&&19!=t||(r=1),i($(this)[0],t+r),!1})},$.fn.bankList=function(){return this.each(function(){$(this).text($(this).text().replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 "))})},$.fn.mobileInput=function(){var e=$(this);""!=e.val()&&(e.val().length<=8?e.val(e.val().replace(/\s/g,"").replace(/(\d{3})(?=\d)/,"$1 ")):e.val(e.val().replace(/\s/g,"").replace(/(\d{3})(?=\d)(\d{4})(?=\d)/,"$1 $2 "))),e.bind("keyup",function(e){var t=l($(this)[0]);this.value=this.value.replace(/\D/g,"");this.value;this.value.length<8?this.value=this.value.replace(/\s/g,"").replace(/(\d{3})(?=\d)/,"$1 "):this.value=this.value.replace(/\s/g,"").replace(/(\d{3})(?=\d)(\d{4})(?=\d)/,"$1 $2 ");var a,n=l($(this)[0]);if(this.value.length>=5&&(t+1!=n||this.value[t+1]||(a=!0)),t==n||a)return i($(this)[0],this.value.length),!1;var r=0;return 4!=t&&9!=t||(r=1),i($(this)[0],t+r),!1})},$.fn.mobileList=function(){return this.each(function(){$(this).text($(this).text().replace(/\s/g,"").replace(/(\d{3})(?=\d)(\d{4})(?=\d)/g,"$1 $2 "))})},$.fn.idCardInput=function(){var e=$(this);""!=e.val()&&(e.val().length<=15?e.val(e.val().replace(/\s/g,"").replace(/(\d{6})(?=\d)/,"$1 ")):e.val(e.val().replace(/\s/g,"").replace(/(\d{6})(?=\d)(\d{8})(?=\d)/,"$1 $2 "))),e.bind("keyup",function(e){var t=l($(this)[0]);this.value=this.value.replace(/[^0-9xX]/g,"");var a=this.value;this.value.length<=15?this.value=this.value.replace(/\s/g,"").replace(/(\d{6})(?=\d)/,"$1 "):this.value=this.value.replace(/\s/g,"").replace(/(\d{6})(?=\d)(\d{8})(?=\d)/,"$1 $2 ");var n=0;8!=e.keyCode&&(n=this.value.length-a.length),i($(this)[0],t+n)})},$.fn.idCardList=function(){return this.each(function(){$(this).text($(this).text().replace(/\s/g,"").replace(/(\d{3})(?=\d)(\d{4})(?=\d)/g,"$1 $2 "))})},$.fn.numberInput=function(e){var t=$(this);t.bind("keyup",function(t){var a=l($(this)[0]),n=this.value;e?this.value=this.value.replace(/[^\d\.]/g,""):this.value=this.value.replace(/[^\d]/g,"");var r=n.length-this.value.length;a-=r,i($(this)[0],a)})},$.fn.floatInput=function(){var e=$(this);e.bind("keyup",function(e){var t=l($(this)[0]),a=this.value;this.value=this.value.replace(/[^\d.]/g,"").replace(/^\./g,"").replace(/^0+([1-9])/,"$1").replace(/^0+$/,"0"),this.value=this.value.replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$","."),this.value=this.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");var n=a.length-this.value.length;t-=n,i($(this)[0],t)})},$.fn.pwdInput=function(){var e=$(this);e.bind("keyup",function(e){var t=l($(this)[0]),a=this.value;this.value=this.value.replace(/[^0-9a-zA-Z_-]/g,"");var n=a.length-this.value.length;t-=n,i($(this)[0],t)})},h.mobile=function(e){n(e,0)},h.bankCard=function(e){n(e,1)},h.idCard=function(e){n(e,2)}});