function delIcon(t,i){for(var e=0;e<i.length;e++)if(i[e].title==t)return i.remove(i[e]),i}function processConfig(){for(var t=iconInit.contents,i=[],e=[],n="",a="",d=0;d<t.length;d++)1==t[d].checked?(n+='<li class="a2 lh50"><img src="" class="delete" width="26" height="26">'+t[d].title+'<span class="drag-handle pull-right"></span></li>',i.push(t[d])):(a+='<li class="a2 lh50"><img src="" class="add" width="26" height="26">'+t[d].title+'<span class="drag-handle pull-right"></span></li>',e.push(t[d]));$("#added").prepend(n),$("#added>li>img").attr("src","../../images/sub.png"),$("#not-added").prepend(a),$("#not-added>li>img").attr("src","../../images/add.png");var s=function(){var n=$(this).parent().text().substring(0,$(this).parent().text().length);delIcon(n,i);for(var a=0;a<t.length;a++)t[a].title==n&&(t[a].checked="0",e.unshift(t[a]));var d=$(this).parent();$(this).parent().remove(),$("#not-added").prepend(d),$("#not-added>li:first-child>img").removeClass("delete"),$("#not-added>li:first-child>img").addClass("add"),$("#not-added>li:first-child>img").attr("src","../../images/add.png"),$("#not-added>li:first-child>img").click(o),t=Array.prototype.concat.apply(i,e),iconInit.contents=t,isPoboApp&&pbSYS.writeLocalFile("main",1,JSON.stringify(iconInit))},o=function(){var n=$(this).parent().text().substring(0,$(this).parent().text().length);delIcon(n,e);for(var a=0;a<t.length;a++)t[a].title==n&&(t[a].checked="1",i.push(t[a]));var d=$(this).parent();$(this).parent().remove(),d.removeClass("add"),d.addClass("delete"),$("#added").append(d),$("#added>li:last-child>img").removeClass("add"),$("#added>li:last-child>img").addClass("delete"),$("#added>li:last-child>img").attr("src","../../images/sub.png"),$("#added>li:last-child>img").click(s),t=Array.prototype.concat.apply(i,e),iconInit.contents=t,isPoboApp&&pbSYS.writeLocalFile("main",1,JSON.stringify(iconInit))};$(".delete").click(s),$(".add").click(o),Sortable.create(byId("added"),{handle:".drag-handle",animation:150,group:"sorting",sort:!0,onEnd:function(){var n=i.length,a=$("#added>li").length,d=[],s=[];a<n&&$("#not-added>li>img").attr("src","../../images/add.png"),$.each($("#added>li"),function(){for(var t=$(this).text().substring(0,$(this).text().length),e=0;e<i.length;e++)if(i[e].title==t){i[e].checked="1",d.push(i[e]);break}}),i=d,$.each($("#not-added>li"),function(){for(var i=$(this).text().substring(0,$(this).text().length),e=0;e<t.length;e++)if(t[e].title==i){t[e].checked="0",s.push(t[e]);break}}),e=s,t=Array.prototype.concat.apply(i,e),iconInit.contents=t,isPoboApp&&pbSYS.writeLocalFile("main",1,JSON.stringify(iconInit))}}),Sortable.create(byId("not-added"),{handle:".drag-handle",animation:150,group:"sorting",sort:!0,onEnd:function(){var n=e.length,a=$("#not-added>li").length,d=[],s=[];a<n&&$("#added>li>img").attr("src","../../images/sub.png"),$.each($("#not-added>li"),function(){for(var t=$(this).text().substring(0,$(this).text().length),i=0;i<e.length;i++)if(e[i].title==t){e[i].checked="0",s.push(e[i]);break}}),e=s,$.each($("#added>li"),function(){for(var i=$(this).text().substring(0,$(this).text().length),e=0;e<t.length;e++)if(t[e].title==i){t[e].checked="1",d.push(t[e]);break}}),i=d,t=Array.prototype.concat.apply(i,e),iconInit.contents=t,isPoboApp&&pbSYS.writeLocalFile("main",1,JSON.stringify(iconInit))}})}Array.prototype.remove=function(t){var i=this.indexOf(t);i>-1&&this.splice(i,1)};var byId=function(t){return document.getElementById(t)},isPoboApp="undefined"!=typeof pbE,iconInit;if(isPoboApp){var pbSYS=pbE.SYS();pbSYS.isHasLocalFile("main",1)&&(iconInit=pbSYS.readLocalFile("main",1),iconInit&&(iconInit=JSON.parse(iconInit))),iconInit||(iconInit=JSON.parse(pbSYS.readConfig("main/conf/main.json")).customs),processConfig()}else $.get("../conf/main.json?"+Date.now(),function(t){iconInit=t.customs,processConfig()});