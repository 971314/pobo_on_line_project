define("information/scripts/details.js",function(require,exports,module){function init(){$(pageId+" .article_tit").css("border-bottom","1px dashed #e2e2e2"),url_ids=$.getPageParam("url_ids"),newsid=$.getPageParam("newsid"),window.callback=function(e){return e=e.replace(/\n/g,"<br>"),e=e.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),e=e.replace(/\s/g,"&nbsp;"),callbackMsg(e)},isPoboApp&&(pbHQ=pbE.HQ(),pbSYS=pbE.SYS(),pbZX=pbE.ZX(),pbINFO=pbE.INFO()),"10401"==url_ids?(queryAnnouncementDetail(),queryAnnouncement()):(queryNews(),queryNewsList())}function queryNews(){var e=newsid;isPoboApp&&pbINFO.infoQueryDetailWithJson(JSON.stringify({doc:"json",newsId:e,type:"mu"}))}function queryNewsList(){var e="10",t=new Array;t[0]=url_ids,isPoboApp&&pbINFO.infoQueryListWithJson(JSON.stringify({type:"mu",groupIDs:t,doc:"json",count:e}))}function callbackMsg(data){if(eval("newsData="+data),"90004"==newsData.moduleId){console.log(newsData);var RelevantNews="";if($.validatorUtils.isNotEmpty(newsData.jData.Indexes)){var newsLists=newsData.jData.Indexes;console.log(newsLists);for(var num=0,i=0;i<newsLists.length;i++){var v=newsLists[i];if(v.ID!=newsid)if(num<3){var Pubtime=v.Pubtime.replace("&nbsp;"," "),chageData=common.timeBucket(Pubtime);RelevantNews+="<li id='"+v.ID+"' href='pobo:uncheck=1&pageId=900005&url=main/information/views/details.html?newsid="+v.ID+"&url_ids="+url_ids+"'><p>"+v.Title.replace("&nbsp;"," ")+"</p><span class='time'>"+chageData+"</span></li>",num++}else console.log("2")}$(pageId+".zx_list").html(RelevantNews)}else if($.validatorUtils.isNotEmpty(newsData.jData.News)){var NewResult=newsData.jData.News,Pubtime=common.timeBucket(NewResult.Pubtime.replace("&nbsp;"," ")),chageText="<pre>"+NewResult.Text+"</pre>";$(pageId+"#newTitle").text(NewResult.Title.replace("&nbsp;"," ")),$(pageId+"#newDate").text(Pubtime),$(pageId+"#newSource").text(NewResult.Source.replace("&nbsp;"," ")),$(pageId+"#newText").html(chageText)}}}function queryAnnouncementDetail(){var e={news_id:newsid};informationService.getAnnouncementDetail(e,function(e){if(0==e.error_no){var t=e.results[0],n="<pre>"+t.news_content+"</pre>",i=common.timeBucket(t.news_date);$(pageId+"#newTitle").text(t.news_title),$(pageId+"#newDate").text(i),$(pageId+"#newSource").text(t.news_source),$(pageId+"#newText").html(n)}else $.alert("公告获取异常:"+e.error_info)},{isShowWait:!1})}function queryAnnouncement(){var e,t=JSON.parse(pbSYS.getDeviceJsonInfo());for(var n in t)72==n&&(e=t[n]);var i={category_id:$.getPageParam("category_id"),token:e,pageNum:1,pageSize:4};informationService.getAnnouncement(i,function(e){if(0==e.error_no){var t=e.results[0].data,n="",i=0;t.length>0?$.each(t,function(){if(i<3)if(1==t.length&&this.id==newsid)$(pageId+" .zx_tabcont").hide();else if(this.id!=newsid){var e=common.timeBucket(this.news_date);n+="<li id='"+this.id+"' href='pobo:uncheck=1&pageId=900005&url=main/information/views/details.html?newsid="+this.id+"&url_ids="+url_ids+"'><p>"+this.news_title+"</p><span class='time'>"+e+"</span></li>",i++}}):$(pageId+" .zx_tabcont").hide(),$(pageId+".zx_list").html(n)}else $.alert("公告获取异常:"+e.error_info)},{isShowWait:!1})}function bindPageEvent(){$.bindEvent($(pageId+" .icon_back"),function(){window.location.href="goBack"}),$.bindEvent($(pageId+" .more_btn"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/information/views/index.html?ids="+$.getPageParam("url_ids")+"&category_id="+$.getPageParam("category_id")+"&Pcategory_id="+$.getPageParam("Pcategory_id"))}),$.preBindEvent($(pageId+" .zx_list")," li",function(){window.open($(this).attr("href"))}),$.bindEvent($(pageId+" article,h1"),function(){$(pageId+" .info_nav").attr("style","display:none;")}),$.bindEvent($(pageId+" #set_btn"),function(){"display:none;"==$(pageId+" .info_nav").attr("style")?$(pageId+" .info_nav").attr("style","display:block;"):$(pageId+" .info_nav").attr("style","display:none;")}),$.bindEvent($(pageId+" #collection_btn"),function(){}),$.bindEvent($(pageId+" #font_size"),function(){$(pageId+" .shade_bg").show(),$(pageId+" .font_layer").show(),$(pageId+" .info_nav").attr("style","display:none;")}),$.bindEvent($(pageId+" .font_ctbox .font_big"),function(){return $(pageId+" .font_ctbox li a").removeClass("active"),$(this).find("a").addClass("active"),$(pageId+" pre").css("font-size","18px"),$(pageId+" .zx_tabcont .title").css("font-size","20px"),$(pageId+" #newTitle").css("font-size","20px"),$(pageId+" .article_tit p").css("font-size","16px"),$(pageId+" .more_btn a").css("font-size","16px"),$(pageId+" .zx_list li").css("font-size","19px"),!1}),$.bindEvent($(pageId+" .font_ctbox .font_normal"),function(){return $(pageId+" .font_ctbox li a").removeClass("active"),$(this).find("a").addClass("active"),$(pageId+"pre").css("font-size","16px"),$(pageId+" .zx_tabcont .title, #newTitle").css("font-size","18px"),$(pageId+" .more_btn a , .article_tit p").css("font-size","14px"),$(pageId+" .zx_list li").css("font-size","17px"),!1}),$.bindEvent($(pageId+" .font_ctbox .font_small"),function(){return $(pageId+" .font_ctbox li a").removeClass("active"),$(this).find("a").addClass("active"),$(pageId+"pre").css("font-size","14px"),$(pageId+" .zx_tabcont .title, #newTitle").css("font-size","16px"),$(pageId+" .more_btn a , .article_tit p").css("font-size","12px"),$(pageId+" .zx_list li").css("font-size","15px"),!1}),$.bindEvent($(pageId+" .shade_bg, .close"),function(){$(pageId+" .shade_bg").hide(),$(pageId+" .font_layer").hide()})}function destroy(){$(pageId+" .info_nav").attr("style","display:none;")}function pageBack(){}function load(){}var pageId="#details ";require("validatorUtils");var commonExt=require("commonExt"),common=require("common"),informationService=require("information/services/informationService").getInstance(),newsid,url_ids,contract,contractInterval,prevCustom,navScroll,newsData,newsCurrent,prevConfig,mainConfig,pbHQ,pbSYS,pbINFO,pbZX,isPoboApp="undefined"!=typeof pbE,HISTORY=9,SELF=100,HOT=100,details={init:init,bindPageEvent:bindPageEvent,destroy:destroy,pageBack:pageBack,load:load};module.exports=details});