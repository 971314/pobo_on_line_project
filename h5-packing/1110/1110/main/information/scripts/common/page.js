define("information/scripts/common/page.js",function(require,exports,module){function initFunc(param){_pageId=getPageId(),dynamicName=getPageId().replace("#","").trim();try{eval("myVIscroll_"+dynamicName)}catch(e){eval("myVIscroll_"+dynamicName+"=null")}parmFunc=param.parmFunc,serviceFunc=param.serviceFunc,funcName=param.funcName,results=param.results,templet=param.templet,totalPage=param.totalPage,curPage=param.curPage,visibleHeight=param.visibleHeight,error_no=param.error_no,pro_main=param.pro_main?param.pro_main:$(_pageId+"#pro_main"),allrows=param.allrows,msg=param.msg,func=param.func||"",showNotData=param.showNotData||"",initVIscrol(),bindTitleEvent()}function queryFunc(insertType){var funcBack=function(resultVo){try{eval("myVIscroll_"+dynamicName).refresh()}catch(e){}return showNotData?(showMsg(),showNotData(resultVo),!1):(func&&func(resultVo),resultVo.error_no&&eval(error_no)==resultVo.error_no?(showMsg(),!1):resultVo.info||resultVo.results&&0!=resultVo.results.length&&eval(results)&&0!=eval(results+".length")?0==resultVo.allrows?(allrows&&$(allrows).html("("+resultVo.allrows+")"),businessUtil.getNotData(pro_main,"暂无评论","html",eval("myVIscroll_"+dynamicName),_pageId),!1):void(resultVo.error_no&&!vError_no(resultVo)||(allrows&&$(allrows).html("("+resultVo.allrows+")"),fillFunc(resultVo,insertType))):(showMsg(),!1))};eval(curPage+"=cPage"),serviceFunc[funcName](parmFunc,funcBack)}function fillFunc(resultVo,insertType){businessUtil.htmlIsEmpty(insertType,pro_main);for(var data=eval(results),html="",i=0;i<data.length;i++){var result=data[i];html+=templet(result)}pro_main.append(html),tPage=Math.ceil(eval(totalPage)),visc_pullUpShow()}function initVIscrol(){if(destroy(),eval("myVIscroll_"+dynamicName))eval("myVIscroll_"+dynamicName)&&eval("myVIscroll_"+dynamicName).refresh();else{var config={isPagingType:!1,visibleHeight:eval(visibleHeight),container:$(_pageId+" #container_yourname"),wrapper:$(_pageId+" #wrapper_yourname"),downHandle:function(){cPage=1,isFirstShowNotData=!0,queryFunc("html")},upHandle:function(){cPage<tPage?(cPage++,queryFunc("append"),isFirstShowNotData=!0):1==cPage?(cPage++,showMsg()):showMsg()}};eval("myVIscroll_"+dynamicName+"= new VIscroll(config)")}queryFunc("html")}function visc_pullUpShow(){cPage<tPage?$(_pageId+".visc_pullUp").show():$(_pageId+".visc_pullUp").hide(),eval("myVIscroll_"+dynamicName.trim()+".refresh()")}function showMsg(){1==cPage?businessUtil.getNotData(pro_main,msg,"html",eval("myVIscroll_"+dynamicName),_pageId):isFirstShowNotData&&(pro_main.append("<p style='text-align: center;'>已加载到最后一页</p>"),visc_pullUpShow(),isFirstShowNotData=!1),eval("myVIscroll_"+dynamicName).refresh()}function getVIscroll(){var dynamicName=getPageId().replace("#","").trim();try{eval("myVIscroll_"+dynamicName)}catch(e){eval("myVIscroll_"+dynamicName+"=null")}return eval("myVIscroll_"+dynamicName)}function bindTitleEvent(){$.bindEvent($(_pageId+"header .header_inner"),function(e){var a=getVIscroll().getWrapperObj();a.scrollTo(0,0,100)},"click")}function destroy(){eval("myVIscroll_"+dynamicName)&&(eval("myVIscroll_"+dynamicName).destroy(),eval("myVIscroll_"+dynamicName+"=null")),cPage=1,tPage=1,isFirstShowNotData=!0}var businessUtil=require("businessUtil"),_pageId=" ",cPage=1,tPage=1,VIscroll=require("vIscroll"),myVIscroll=null,parmFunc={},serviceFunc="",results="",templet="",totalPage="",curPage="",visibleHeight="",error_no="",pro_main="",allrows="",func="",showNotData="",msg="",funcName="",isFirstShowNotData=!0,page={initFunc:initFunc,destroy:destroy,myVIscroll:getVIscroll};module.exports=page});