define(function(n,e,t){function a(n){v={pageId:"",pwdWindowId:"",pwdInputId:"",clickObj:"",callBack:null},$.extend(v,n);var e=v.pageId+v.pwdInputId,t=v.clickObj||$(e).parent();t=v.pageId+t,$.bindEvent(t,function(n){if(n.stopPropagation(),$.config.platform==s.platform.PLATFORM_PC){var t={isSaveDom:!0,beforeInitFunc:function(){c()},afterInitFunc:function(){d(e,curKeyCode,v.callBack),console.log("input="+$(e).val())},beforeCloseFunc:function(){console.log("beforeCloseFunc")},afterCloseFunc:function(){l()}},a=1==$(e).index(this);t.isSaveDom=1!=$(e).index(this)&&t.isSaveDom,g.init(this,$(e).index($(this))+1,a,t)}else o(v.pageId,$(e),s.keyPanelType.NUMBER)},"click"),$.config.platform==s.platform.PLATFORM_PC?$.bindEvent(e,function(n){var t=n.originalEvent.detail.optType;d(e,t,v.callBack)},"input"):$.setSStorageInfo("callback",v.callBack)}function o(n,e,t){var a=e.attr("id"),o={moduleName:"main",pageId:n.substring(1),eleId:a,doneLable:"done",keyboardType:t};u.function50210(o)}function i(){var n={moduleName:"main"};u.function50211(n)}function d(n,e,t){var a=$(n).attr("value"),o=a.length;e+="";var i=e?e:keycode;switch(i){case"-2":$(n).parent().find("em").html(""),$(n).val(""),a="";break;case"-3":if(6==a.length){var d={tradePwd:a};m.rsaEncrypt(d,t)}break;case"-5":a.length>=0&&$(n).parent().find("em").eq(o).html("");break;case"del":a.length>=0&&$(n).parent().find("em").eq(o).html("");break;default:if(a.length<=6&&($(n).parent().find("em").eq(o-1).html("â—"),6==a.length)){var d={tradePwd:a};m.rsaEncrypt(d,v.callBack)}}}function c(){var n=v.pageId+" "+v.pwdInputId;$(v.pageId+" "+v.pwdWindowId).slideDown("slow"),$(n).siblings("em").html(""),$(n).val(""),$.config.platform==s.platform.PLATFORM_PC?g.init(n,1,!0,{}):o(v.pageId,$(n),s.keyPanelType.NUMBER)}function l(){$(v.pageId+" "+v.pwdWindowId).hide(),p()}function r(n,e,t){$.bindEvent(n+" #"+e,function(t){t.stopPropagation(),$(n+"input").css("background","#F6F6F6"),$(n+" #"+e).css("background","#F9F9C8"),$.config.platform==s.platform.PLATFORM_PC?g.init(n+" #"+e,1,!0,{}):o(n,$(n+" #"+e),s.keyPanelType.NUMBER)},"click"),$.config.platform==s.platform.PLATFORM_PC?$.bindEvent(n+" #"+e,function(n){n.stopPropagation(),"function"==typeof t&&t()},"input"):window.customKeyboardEvent={keyBoardInputFunction:t},$.bindEvent(n,function(){$(n+"input").css("background","#F6F6F6"),p()})}function p(){$.config.platform==s.platform.PLATFORM_PC?g&&g.close():i()}function f(n,e,t){var a={moduleName:"main",pageId:e,eleId:n,doneLable:"done",keyboardType:t};u.function50210(a)}var u=n("nativePluginService"),s=n("constants"),m=n("commonExt");n("keyPanel");var g=new $.KeyPanel,v={},P={initPwdWindow:a,showPwdWindow:c,hidePwdWindow:l,initPwdInput:r,hideKeyBoard:p,inputKeyboard:f,inputKeyEvent:d};t.exports=P});