define(function(t,e,n){var i=function(t,e,n){var i=t,r=e||0,s=0;this.getRawData=function(){return i},"string"==typeof t?(s=n||i.length,this.getByteAt=function(t){return 255&i.charCodeAt(t+r)},this.getBytesAt=function(t,e){for(var n=[],s=0;e>s;s++)n[s]=255&i.charCodeAt(t+s+r);return n}):"unknown"==typeof t&&(s=n||IEBinary_getLength(i),this.getByteAt=function(t){return IEBinary_getByteAt(i,t+r)},this.getBytesAt=function(t,e){return new VBArray(IEBinary_getBytesAt(i,t+r,e)).toArray()}),this.getLength=function(){return s},this.getSByteAt=function(t){var e=this.getByteAt(t);return e>127?e-256:e},this.getShortAt=function(t,e){var n=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t);return 0>n&&(n+=65536),n},this.getSShortAt=function(t,e){var n=this.getShortAt(t,e);return n>32767?n-65536:n},this.getLongAt=function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),r=this.getByteAt(t+2),s=this.getByteAt(t+3),o=e?(((n<<8)+i<<8)+r<<8)+s:(((s<<8)+r<<8)+i<<8)+n;return 0>o&&(o+=4294967296),o},this.getSLongAt=function(t,e){var n=this.getLongAt(t,e);return n>2147483647?n-4294967296:n},this.getStringAt=function(t,e){for(var n=[],i=this.getBytesAt(t,e),r=0;e>r;r++)n[r]=String.fromCharCode(i[r]);return n.join("")},this.getCharAt=function(t){return String.fromCharCode(this.getByteAt(t))},this.toBase64=function(){return window.btoa(i)},this.fromBase64=function(t){i=window.atob(t)}},r=function(){function t(){var t=null;return window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest),t}function e(e,n,i){var r=t();r?(n&&("undefined"!=typeof r.onload?r.onload=function(){"200"==r.status?n(this):i&&i(),r=null}:r.onreadystatechange=function(){4==r.readyState&&("200"==r.status?n(this):i&&i(),r=null)}),r.open("HEAD",e,!0),r.send(null)):i&&i()}function n(e,n,r,s,o,a){var u=t();if(u){var g=0;s&&!o&&(g=s[0]);var f=0;s&&(f=s[1]-s[0]+1),n&&("undefined"!=typeof u.onload?u.onload=function(){"200"==u.status||"206"==u.status||"0"==u.status?(u.binaryResponse=new i(u.responseText,g,f),u.fileSize=a||u.getResponseHeader("Content-Length"),n(u)):r&&r(),u=null}:u.onreadystatechange=function(){if(4==u.readyState){if("200"==u.status||"206"==u.status||"0"==u.status){var t={status:u.status,binaryResponse:new i("unknown"==typeof u.responseBody?u.responseBody:u.responseText,g,f),fileSize:a||u.getResponseHeader("Content-Length")};n(t)}else r&&r();u=null}}),u.open("GET",e,!0),u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),s&&o&&u.setRequestHeader("Range","bytes="+s[0]+"-"+s[1]),u.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),u.send(null)}else r&&r()}return function(t,i,r,s){s?e(t,function(e){var o,a,u=parseInt(e.getResponseHeader("Content-Length"),10),g=e.getResponseHeader("Accept-Ranges");o=s[0],s[0]<0&&(o+=u),a=o+s[1]-1,n(t,i,r,[o,a],"bytes"==g,u)}):n(t,i,r)}}();window.BinaryFile=i,window.BinaryAjax=r});