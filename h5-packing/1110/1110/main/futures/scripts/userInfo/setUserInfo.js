define("futures/scripts/userInfo/setUserInfo.js",function(require,exports,module){function init(){if(isPoboApp&&(pbHQ=pbE.HQ(),pbSYS=pbE.SYS(),pbZX=pbE.ZX(),pbINFO=pbE.INFO()),$.validatorUtils.isNotEmpty(pbE.SYS().getPublicData("image"))){$(pageId+" #face_image").attr("src",$.config.global.domain+pbE.SYS().getPublicData("image"));var e={eleImg:$(pageId+" #face_image"),width:"100%",height:"125px",lodingtimeout:13e3,loadFailed:"../../images/user_img.png",loading:"../../images/user_img.png",bindOnclick:!0};loading_img.imgload(e,null)}$(pageId+"#user_mobile").text(pbE.SYS().getAppCertifyInfo("PbKey_H5_Home_Auth_LoginName"))}function bindPageEvent(){$.bindEvent($(pageId+" .icon_back"),function(){window.location.href="goBack"}),$.bindEvent($(pageId+" .spel"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/userInfo/updatePassword.html")}),$.bindEvent($(pageId+" .cancel_btn"),function(){$(pageId+" .shade_bg").hide(),$(pageId+" .upload_btn").hide()}),$(pageId+" #btn1").change(function(obj){$.showIndicator=$.showIndicatorHtml();var file=obj.target.files[0];if(console.log(file),!/image\/\w+/.test(file.type))return $.hideIndicator=$.hideIndicatorHtml(),alert("图片格式不正确，请重新上传"),!1;var reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(e){var mobile=$(pageId+"#user_mobile").text(),pictureBase64=this.result;$.ajax({type:"post",data:{mobile_no:mobile,funcNo:"1109804",pictureBase64:pictureBase64},url:$.config.global.UploadImage,dataType:"text",error:function(e){$.hideIndicator=$.hideIndicator(),$(pageId+" #btn1").val(""),alert("图片格式不正确，请重新上传")},success:function(result){$(pageId+" #btn1").val("");var resultData=eval("("+result+")");if("0"==resultData.error_no){$(pageId+" #face_image").attr("src",$.config.global.domain+resultData.picture);var param={eleImg:$(pageId+" #face_image"),width:"100%",height:"125px",lodingtimeout:13e3,loadFailed:"../../images/user_img.png",loading:"../../images/user_img.png",bindOnclick:!0};loading_img.imgload(param,null),$.hideIndicator=$.hideIndicatorHtml(),alert("上传成功")}else $.hideIndicator=$.hideIndicatorHtml(),alert("上传失败")}})}}),$.bindEvent($(pageId+" #outLogin"),function(){pbE.SYS().clearAuthData(),setTimeout(function(){window.location.href="close"},"100")})}function destroy(){}function pageBack(){}function load(){}var pageId="#userInfo_setUserInfo ";require("2.0.0/js/plugins/validator/scripts/validatorUtils");var loading_img=require("futures/scripts/common/imgloading"),mainConfig,contract,news,pbHQ,pbSYS,pbINFO,pbZX,isPoboApp="undefined"!=typeof pbE,HISTORY=9,SELF=100,HOT=100,user_id,setUserInfo={init:init,bindPageEvent:bindPageEvent,destroy:destroy,pageBack:pageBack,load:load};module.exports=setUserInfo});