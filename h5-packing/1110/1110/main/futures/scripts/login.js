define("futures/scripts/login.js",function(n,i,e){function o(){if($("input").val(""),E&&(c=pbE.HQ(),g=pbE.SYS(),f=pbE.INFO()),"undefined"!=typeof pbE){var n=pbE.SYS().getDeviceJsonInfo();if(n){var i=JSON.parse(n);if(i[71]&&(U=i[71]),i[255]){var e=i[255];"2"==e?N="iOS":"3"==e&&(N="Android")}i[73]&&(q=i[73]),i.jgid&&(I=i.jgid)}}}function t(){$.bindEvent($(p+" .close"),function(){window.location.href="goBack"}),$.bindEvent($(p+" #forget_password"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/forgetPassword/findPassword1.html")}),$.bindEvent($(p+" #quick_login"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/register.html")}),$.bindEvent($(p+" #forget_password1"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/forgetPassword/findPassword1.html")}),$.bindEvent($(p+" #quick_login1"),function(){window.open("pobo:uncheck=1&pageId=900005&url=main/futures/views/register.html")}),$.bindEvent($(p+" .icon_eye"),function(){var n=$(p+" .icon_eye").parent().find("input").attr("type");"password"==n?($(p+" .icon_eye").parent().find("input").attr({type:"text"}),$(this).css("background","url(../images/ic_eyes_show.png) no-repeat center"),$(this).css("background-size","0.22rem")):($(p+" .icon_eye").parent().find("input").attr({type:"password"}),$(this).css("background","url(../images/ic_eyes.png) no-repeat center"),$(this).css("background-size","0.22rem"))}),$.bindEvent($(p+" .disable"),function(){r()&&s()})}function r(){return b=$.trim($(p+" .login_input").eq(0).find("input").val()),$.validatorUtils.isEmpty(b)?(alert("请输入手机号"),!1):(m=$.trim($(p+" .login_input").eq(1).find("input").val()),!$.validatorUtils.isEmpty(m)||(alert("请输入登录密码"),!1))}function s(){var n=$.trim($(p+" .login_input").eq(0).find("input").val()),i=$.trim($(p+" .login_input").eq(1).find("input").val());$.ajax({type:"POST",url:h+"login",data:{poboNumber:k,loginName:n,loginType:S,pwd:i,orgNumber:I,deviceId:U,OS:N,version:q},dataType:"json",success:function(e){0==e.loginUser.returnFlag?(e.loginUser.pwd=i,e.loginUser.loginName=n,e.loginUser.loginType=S,v=e.loginUser,w.rsaEncrypt({login_pwd:$.trim($(p+" .login_input").eq(1).find("input").val())},function(n){var i={poboNumber:k,uid:e.loginUser.userId,deviceId:U,OS:N,version:q,token:e.loginUser.token,address:"",orgNumber:I,istoken:"0",login_mobile:$.trim($(p+" .login_input").eq(0).find("input").val()),login_password:n.login_pwd};y.userLogin(i,function(n){0==n.error_no?(setTimeout(function(){pbE.SYS().sendMessageToNative("PbKey_H5_Home_Auth_Data",JSON.stringify(e.loginUser))},100),window.doShow=function(n){"1"==n?l.login():l.login()},_.saveSessionUserInfo(n.results),window.location.href="goBack"):alert(n.error_info)})})):2==e.loginUser.returnFlag?alert("账号或密码有误，请修改后重试"):alert("发送失败，请稍后重试")},error:function(){alert("连接超时，请检查网络后重试")}})}function a(){}function u(){}function d(){}var p="#login",l=n("index");n("validatorUtils");var c,g,f,v,b,m,w=n("commonExt"),_=n("common"),y=n("futures/services/userService").getInstance(),E="undefined"!=typeof pbE,h="https://pbmobile.pobo.net.cn/pobocertification_WebService/",k="123",S="1",U="127.0.0.1",I="789",N="Android",q="1.0.0.1",O={init:o,bindPageEvent:t,destroy:a,pageBack:u,load:d};e.exports=O});